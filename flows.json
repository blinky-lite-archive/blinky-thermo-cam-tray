[
    {
        "id": "4c1c8ca0.447d94",
        "type": "tab",
        "label": "Device A",
        "disabled": false,
        "info": ""
    },
    {
        "id": "510a2b13.26f614",
        "type": "tab",
        "label": "web-app",
        "disabled": false,
        "info": ""
    },
    {
        "id": "26093b29.39d8d4",
        "type": "tab",
        "label": "Setup Wireless SSID",
        "disabled": false,
        "info": ""
    },
    {
        "id": "3d014934.7e38a6",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2c5d25cb.3428ca",
        "type": "subflow",
        "name": "App NavBar",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "c104210d.418eb"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 340,
                "y": 80,
                "wires": [
                    {
                        "id": "c104210d.418eb",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "ca529822.9112f8",
        "type": "subflow",
        "name": "HTML",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "99bb1519.85fc18"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "e3c68b88.d82258",
        "type": "subflow",
        "name": "App CSS",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "f5a9eda8.5c5bc"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 320,
                "y": 80,
                "wires": [
                    {
                        "id": "f5a9eda8.5c5bc",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "8341090a.df9758",
        "type": "subflow",
        "name": "App HTML",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "966e270e.701e48"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "6ad7c930.1a06b8",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#000000",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey"
            }
        },
        "site": {
            "name": "Blinky-Lite-Tutorial",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "c427a7cd.35f1f8",
        "type": "websocket-listener",
        "path": "/setup/websocket",
        "wholemsg": "false"
    },
    {
        "id": "44b51478.9c022c",
        "type": "websocket-listener",
        "path": "/blinky-thermo-cam/websocket",
        "wholemsg": "false"
    },
    {
        "id": "79250bf3.365cc4",
        "type": "mqtt-broker",
        "name": "MQTT Broker",
        "broker": "$(MQTTSERVERIP)",
        "port": "1883",
        "clientid": "$(MQTTCLIENTID)",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "c104210d.418eb",
        "type": "template",
        "z": "2c5d25cb.3428ca",
        "name": "navBar",
        "field": "payload.navBar",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- navBar -->\n    <div class=\"jumbotron\" width=\"100%\">\n        <table width=\"100%\">\n            <tr>\n                <td style=\"text-align:left; vertical-align:middle;\"  width=\"20%\">\n                    <a href='https://www.blinky-lite.io/' target='_blank'>\n                        <img src=\"/img/BlinkyLogo.gif\" height=\"75px\"/>\n                    </a>                \n                </td>\n                <td width=\"60%\" style=\"text-align:center; vertical-align:middle;\">\n                    <h1 class=\"jumbotron-title big-text bold-text\">\n                        <img src=\"/img/{{{payload.navBarIcon}}}\" height=\"75px\" style=\"padding-right:20px;\"/><span>{{{payload.title}}}</span>\n                    </h1>\n                </td>\n                <td style=\"text-align:right; vertical-align:middle;\" width=\"20%\">\n                    <a href='/apps'><img src=\"/img/appsYellow.png\" height=\"75px\"/></a>\n                </td>\n            </tr>\n        </table>\n    </div>",
        "output": "str",
        "x": 200,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "b9df3f26.ab53f",
        "type": "template",
        "z": "ca529822.9112f8",
        "name": "HTML",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n{{{payload.head}}}\n  </head>\n  <body>\n{{{payload.navBar}}}\n{{{payload.html.websocket}}}\n{{{payload.body}}}\n{{{payload.foot}}}\n  </body>\n</html>",
        "output": "str",
        "x": 1150,
        "y": 40,
        "wires": [
            [
                "d1d9e12b.926ff"
            ]
        ]
    },
    {
        "id": "895ba39c.86e59",
        "type": "template",
        "z": "ca529822.9112f8",
        "name": "Foot",
        "field": "payload.foot",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "    <div id=\"acknowledgeDialog\" title=\"Acknowledge\" class='card'>\n        <p class='card-title' id='acknowledgeDialogTitle'>Warning</p>\n        <div class='card-body'>\n            <p class='tableText' id='acknowledgeDialogText'>Text</p>\n        </div>\n    </div>\n    <div id=\"optionDialog\" title=\"Option\" class='card'>\n        <p class='card-title' id='optionDialogTitle'>Choice</p>\n        <div class='card-body'>\n            <p class='tableText' id='optionDialogText'>Text</p>\n        </div>\n    </div>\n    <div id=\"messageDialog\" title=\"Message\" class='card'>\n        <p class='card-title' id='messageDialogTitle'>Warning</p>\n        <div class='card-body'>\n            <p class='tableText' id='messageDialogText'>Text</p>\n        </div>\n    </div>\n    <script src=\"/scripts/popper.js\"></script>\n    <script src=\"/scripts/bootstrap.js\"></script>",
        "output": "str",
        "x": 690,
        "y": 40,
        "wires": [
            [
                "a9a62959.7c01e8"
            ]
        ]
    },
    {
        "id": "aa17ff35.7cdfd",
        "type": "template",
        "z": "ca529822.9112f8",
        "name": "Head",
        "field": "payload.head",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "    <meta charset=\"UTF-8\">\n    <link rel=\"icon\" href=\"/img/favicon.ico?v=4\" type=\"image/x-icon\"/>\n    <title>{{payload.title}}</title>\n    <link rel=\"stylesheet\" href=\"/css/bootstrap.css\"/>\n    <link rel=\"stylesheet\" href=\"/jquery/jquery-ui.css\"/>\n    <link rel=\"stylesheet\" href=\"/jquery/jquery-ui-timepicker-addon.css\"/>\n    <script src=\"/jquery/jquery.js\"></script>\n    <script src=\"/jquery/jquery-ui.js\"></script>\n    <script src=\"/jquery/jquery-ui-timepicker-addon.js\"></script>\n    <script src=\"/scripts/plotly-latest.min.js\"></script>\n    <script src=\"/scripts/pako.min.js\"></script>\n{{{payload.extraScripts}}}\n    <style>\n{{{payload.css}}}\n    </style>\n    <style>\n{{{payload.extraCss}}}\n    </style>\n    <script>\n{{{payload.utilityScripts}}}\n    </script>\n    <script>\n{{{payload.javascript}}}\n    </script>",
        "output": "str",
        "x": 570,
        "y": 40,
        "wires": [
            [
                "895ba39c.86e59"
            ]
        ]
    },
    {
        "id": "d1d9e12b.926ff",
        "type": "http response",
        "z": "ca529822.9112f8",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 1270,
        "y": 40,
        "wires": []
    },
    {
        "id": "c4ed2505.8c07e8",
        "type": "template",
        "z": "ca529822.9112f8",
        "name": "Utility Scripts",
        "field": "payload.utilityScripts",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "        var remoteApp = true;\n        var ws;\n        var userID = -1;\n        var useWebSocketsFlag = true;\n        var project = '{{{payload.project}}}';\n        var heartBeatImage = false;\n        var wsUri = '';\n        var wsConnected = false;\n\n        function setRemoteApp(remoteAppSet)\n        {\n            remoteApp  = remoteAppSet;\n        }\n        function webSocketConnected()\n        {\n            return wsConnected;\n        }\n        function useWebSockets(webSocketsFlag)\n        {\n            useWebSocketsFlag = webSocketsFlag;\n        }\n        function wsConnectC()\n        {\n            if (!useWebSocketsFlag)\n            {\n                return;\n            }\n            if (wsUri.length < 1)\n            {\n                var uri = window.location.href.split('://');\n                var wslead = 'ws://';\n                if (uri[0] == 'https') wslead = 'wss://';\n                var questionLocation = uri[1].indexOf('?');\n                if (questionLocation >= 0)\n                {\n                    uri[1] = uri[1].substring(0,questionLocation);\n//                    console.log(uri[1]);\n                }\n                if (uri[1].indexOf('/') < (uri[1].length - 1))\n                {\n                    wsUri = wslead + uri[1] + '/websocket';\n                }\n                else\n                {\n                    wsUri = wslead + uri[1] + 'websocket';\n                }\n            }\n            ws = new WebSocket(wsUri);\n            ws.onmessage = function(event)\n            {\n                onWebSocketMessage(JSON.parse(event.data));\n        \n            };\n            ws.onopen = function()\n            {\n                console.log(\"Websocket connected\");\n                wsConnected = true;\n                $('#webSocketStatus').html('Open');\n                $('#reOpenWebSocketButton').hide();\n                $('#webSocketStatusRow').css('padding-bottom','0px');\n                $('#webSocketStatusCard').hide();\n                onWebSocketOpen();\n            };\n            ws.onclose = function()\n            {\n                console.log(\"Websocket closed\");\n                wsConnected = false;\n                $('#webSocketStatus').html('Closed');\n                $('#reOpenWebSocketButton').show();\n                $('#webSocketStatusCard').show();\n                $('#webSocketStatusRow').css('padding-bottom','25px');\n                onWebSocketClose();\n                wsConnectC();\n            };\n        }\n\n        function getRandomInt(max)\n        {\n          return Math.floor(Math.random() * Math.floor(max));\n        }\n        $( document ).ready(function()\n        {\n            userID  = {{{payload.userID}}};\n            if (!useWebSocketsFlag)\n            {\n                $('#webSocketStatusRow').css('padding-bottom','0px');\n                $('#webSocketStatusCard').hide();\n            }\n            wsConnectC();\n            onDocumentReady();\n       });\n        $( function() \n        {\n            $( \"#acknowledgeDialog\" ).dialog(\n                {\n                    width:    500,\n                    autoOpen: false,\n                    buttons:\n                    [\n                        {\n                            text: \"Ok\",\n                            click: function() { $( this ).dialog( \"close\" );},\n                            showText: false\n                        },\n                   ]\n                });\n            $( \"#messageDialog\" ).dialog(\n                {\n                    width:    500,\n                    autoOpen: false,\n                    buttons:[]\n                });\n        } );\n        function optionDialog(headerText, title, text, buttonTexts, buttonFunctions)\n        {\n            var buttonDefinitions = [];\n            for (var ii = 0; ii < buttonTexts.length; ++ii)\n            {\n                buttonDefinitions[ii] = \n                    {\n                        text: buttonTexts[ii],\n                        click: buttonFunctions[ii],\n                        showText: false\n                    };\n            }\n            $( \"#optionDialog\" ).dialog( \"option\", \"title\", headerText );   \n            $( \"#optionDialog\" ).dialog( \"option\", \"buttons\", buttonDefinitions);\n            $( \"#optionDialogTitle\" ).html(title);\n            $( \"#optionDialogText\" ).html(text);\n            $( \"#optionDialog\" ).dialog( \"open\" );\n        }\n        $( function() \n        {\n            $( \"#optionDialog\" ).dialog(\n                {\n                    width:    500,\n                    autoOpen: false,\n                    buttons:\n                    [\n                        {\n                            text: \"Ok\",\n                            click: function() {$( this ).dialog( \"close\" );},\n                            showText: false\n                        },\n                        {\n                            text: \"Cancel\",\n                            click: function() {$( this ).dialog( \"close\" );},\n                            showText: false\n                        },\n                   ]\n                });\n        } );\n        function acknowledgeDialog(headerText, title, text)\n        {\n            $( \"#acknowledgeDialog\" ).dialog( \"option\", \"title\", headerText );    \n            $( \"#acknowledgeDialogTitle\" ).html(title);\n            $( \"#acknowledgeDialogText\" ).html(text);\n            $( \"#acknowledgeDialog\" ).dialog( \"open\" );\n        }\n        function messageDialog(headerText, title, text)\n        {\n            $( \"#messageDialog\" ).dialog( \"option\", \"title\", headerText );    \n            $( \"#messageDialogTitle\" ).html(title);\n            $( \"#messageDialogText\" ).html(text);\n            $( \"#messageDialog\" ).dialog( \"open\" );\n        }\n        function heartbeat()\n        {\n            heartBeatImage = !heartBeatImage;\n            var heartBeatImageSrc = '/img/heartRed.png';\n            if (heartBeatImage) heartBeatImageSrc = '/img/heartPink.png';\n            $('#heartBeatID').attr('src',heartBeatImageSrc);\n        }\n        function getCookie(extension)\n        {\n            var cookies = document.cookie.split(';');\n            var token = null;\n            var cookieName = project + extension + \"=\";\n            for (var icookie = 0; icookie < cookies.length; ++icookie)\n            {\n                var index = cookies[icookie].indexOf(cookieName);\n                if (index >= 0)\n                {\n                    token = cookies[icookie].substring(index + cookieName.length);\n                }\n            }\n            return token;\n        }\n        function sendActionMsg(topic,role,actionMsg)\n        {\n            var roleToken = \"\";\n            if (remoteApp) roleToken  = getCookie('Role');\n            if (roleToken == null)\n            {\n                location.reload();\n                return;\n            }\n            var webSocketMsg = \n            {\n                topic     : topic,\n                payload   : actionMsg,\n                userID    : userID,\n                token     : getCookie('Role'),\n                role      : role\n            };\n            ws.send(JSON.stringify(webSocketMsg));\n        }\n",
        "output": "str",
        "x": 430,
        "y": 40,
        "wires": [
            [
                "aa17ff35.7cdfd"
            ]
        ]
    },
    {
        "id": "99bb1519.85fc18",
        "type": "function",
        "z": "ca529822.9112f8",
        "name": "Get project name and userID",
        "func": "function getRandomInt(max)\n{\n  return Math.floor(Math.random() * Math.floor(max));\n}\nmsg.payload['project'] = global.get('project')\nmsg.payload['userID'] = getRandomInt(32768);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 220,
        "y": 40,
        "wires": [
            [
                "c4ed2505.8c07e8"
            ]
        ]
    },
    {
        "id": "a9a62959.7c01e8",
        "type": "template",
        "z": "ca529822.9112f8",
        "name": "html.websocket",
        "field": "payload.html.websocket",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- websocket status HTML -->\n    <div width=\"100%\">\n        <div class='row' id='webSocketStatusRow' style='padding-bottom: 0px;'>\n            <div class='col-md-12' align='center'>\n\n                <div class='card' id='webSocketStatusCard' >\n                    <p class='card-title'>Web Socket Status</p>\n                    <div class='card-body' align=\"center\">\n                        <div class='row'  style='padding-top: 0px;'>\n                            <table width='100%'>\n                                <tr>\n                                    <td width='60%' >\n                                        <span class='card-text' >Websocket Status</span>\n                                    </td>\n                                    <td width='20%' align='center'>\n                                        <button class='btn card-button btn-block big-text' id='reOpenWebSocketButton' onclick=\"wsConnectC()\">Re-open</button>\n                                    </td>\n                                    <td width='20%' align='center'>\n                                        <span class='card-text' id='webSocketStatus' >Closed</span>\n                                   </td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n",
        "output": "str",
        "x": 840,
        "y": 40,
        "wires": [
            [
                "35ffcf83.1547"
            ]
        ]
    },
    {
        "id": "35ffcf83.1547",
        "type": "function",
        "z": "ca529822.9112f8",
        "name": "IP filter",
        "func": "var ipfilter = [\n    \"127.0.0.16\"];\nvar ipAddress = ( msg.req.headers['x-forwarded-for'] || '').split(',').pop() || \n          msg.req.connection.remoteAddress || \n          msg.req.socket.remoteAddress || \n          msg.req.connection.socket.remoteAddress;\nif (ipAddress==undefined) return null;\nvar ipAddressSplit = ipAddress.split(\".\");\nfor (var ii =  0; ii < ipfilter.length; ++ii)\n{\n    var ipfilterSplit = ipfilter[ii].split(\".\");\n    if (ipAddress == ipfilter[ii])\n    { \n        return null;\n    }\n    if (ipfilterSplit[2] == '*')\n    {\n        if ((ipfilterSplit[0] == ipAddressSplit[0]) && (ipfilterSplit[1] == ipAddressSplit[1]))\n        {\n            return null;\n        }\n    }\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 990,
        "y": 40,
        "wires": [
            [
                "b9df3f26.ab53f"
            ]
        ]
    },
    {
        "id": "f5a9eda8.5c5bc",
        "type": "template",
        "z": "e3c68b88.d82258",
        "name": "CSS",
        "field": "payload.css",
        "fieldType": "msg",
        "format": "css",
        "syntax": "mustache",
        "template": "        :root \n        {\n          --color1: #415c71;\n          --color2: #547792;\n          --color3: #9eb5c7;\n          --color4: #c6c2bb;\n          --color5: #fdc300;\n          --big-text-size :300%;\n          --bold-text :900;\n          --vert-pad : 25px;\n          --horz-pad : 25px;\n        }\n        body \n        {\n          background-color: white !important;\n          padding-left:25px;\n          padding-right:25px;\n        }\n        \n        img \n        {\n          object-fit: contain;\n        }\n        a\n        {\n            color: white;\n        }\n        a:visited \n        { \n            color: var(--white);\n        }\n        a:hover \n        { \n            color: var(--color5);\n        }\n\n        .jumbotron \n        {\n          background-color: var(--color2) !important;\n          color: white;\n          padding-top:25px;\n          padding-bottom:25px;\n        }\n        .jumbotron-title\n        {\n          color:var(--color5);\n        }\n        .jumbotron-button\n        {\n          color: white;\n          background-color: var(--color1);\n       }\n        .card\n        {\n          background-color: var(--color2) !important;\n          text-align: center;\n        }\n        .card-body\n        {\n          background-color: var(--color3);;\n        }\n        .card-button\n        {\n          color: var(--color5) !important;\n          background-color: var(--color1) !important;\n          font-weight: bold;\n        }\n        .card-title\n        {\n          color: var(--color5);\n          font-weight: var(--bold-text);\n          font-size: var(--big-text-size);\n         }\n        .card-text\n        {\n          color: white;\n          text-align: left;\n          font-size: var(--big-text-size);\n        }\n        .danger-card\n        {\n          background-color: yellow !important;\n          text-align: center;\n        }\n        .danger-card-body\n        {\n          background-color: yellow;\n        }\n        .danger-card-button\n        {\n          color: yellow !important;\n          background-color: red !important;\n          font-weight: bold;\n        }\n        .danger-card-title\n        {\n          color: red;\n          font-weight: var(--bold-text);\n          font-size: var(--big-text-size);\n         }\n        .danger-card-text\n        {\n          color: white;\n          text-align: left;\n          font-size: var(--big-text-size);\n        }\n        .tableHeading\n        {\n          color:var(--container-title-color);\n        }\n        .tableText\n        {\n          color:var(--container-text-color);\n          font-size: var(--big-text-size);\n        }\n       .vert-pad\n        {\n            padding-top:var(--vert-pad);;\n            padding-bottom:var(--vert-pad);;\n        }\n        .horz-pad\n        {\n            padding-left:var(--horz-pad);;\n            padding-right:var(--horz-pad);;\n        }\n        .big-text\n        {\n            font-size: var(--big-text-size);\n        }\n        .bold-text\n        {\n            font-weight: var(--bold-text);\n        }\n       .ui-dialog-titlebar-close \n        {\n            visibility: hidden;\n        }\n        input.inputLarger \n        { \n            transform: scale(3); \n            margin: 1px;\n        }\n        .googleSlide4by3-container \n        {\n            position: relative;\n            overflow: hidden;\n            padding-top: 75.0%;\n        }\n        .googleSlide4by3-iframe {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            border: 0;\n        }        \n        .custom-select\n        {\n            color: black;\n            background-color: white;\n            height:80px;\n            line-height:70px;\n        }\n",
        "output": "str",
        "x": 190,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "966e270e.701e48",
        "type": "subflow:e3c68b88.d82258",
        "z": "8341090a.df9758",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "899d0666.97b868"
            ]
        ]
    },
    {
        "id": "9460eaf0.da7628",
        "type": "subflow:ca529822.9112f8",
        "z": "8341090a.df9758",
        "name": "",
        "x": 620,
        "y": 80,
        "wires": []
    },
    {
        "id": "899d0666.97b868",
        "type": "subflow:2c5d25cb.3428ca",
        "z": "8341090a.df9758",
        "x": 420,
        "y": 80,
        "wires": [
            [
                "9460eaf0.da7628"
            ]
        ]
    },
    {
        "id": "6c8ad237.33ae7c",
        "type": "inject",
        "z": "26093b29.39d8d4",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 820,
        "y": 40,
        "wires": [
            [
                "6d4f56e0.04a238"
            ]
        ]
    },
    {
        "id": "6d4f56e0.04a238",
        "type": "exec",
        "z": "26093b29.39d8d4",
        "command": "iwconfig wlan0 | grep ESSID",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 820,
        "y": 100,
        "wires": [
            [
                "c6d2055.718baf8"
            ],
            [],
            []
        ]
    },
    {
        "id": "c6d2055.718baf8",
        "type": "function",
        "z": "26093b29.39d8d4",
        "name": "Get SSID",
        "func": "var ssid = msg.payload.substring(msg.payload.indexOf(\"ESSID\") + 6).split('\\n')[0];\nreturn {topic:msg.topic, payload:{topic:msg.topic ,payload:ssid, userID: msg.userID }};\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1020,
        "y": 80,
        "wires": [
            [
                "9bc013a4.b46c"
            ]
        ]
    },
    {
        "id": "1e80ca53.767a96",
        "type": "http in",
        "z": "26093b29.39d8d4",
        "name": "/setup",
        "url": "/setup",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 460,
        "wires": [
            [
                "930a7a63.11bf58"
            ]
        ]
    },
    {
        "id": "e1192fe0.96315",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "Set Title",
        "field": "payload.title",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "Wireless Setup",
        "output": "str",
        "x": 220,
        "y": 500,
        "wires": [
            [
                "fc3a3f22.7533"
            ]
        ]
    },
    {
        "id": "fc3a3f22.7533",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "script.global",
        "field": "payload.script.global",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "// Global Javascript\n        var appStarted = false;\n        var networkList = null;\n        var selectedNetwork = -1;\n        useWebSockets(true);\n        function onDocumentReady()\n        {\n            setRemoteApp(false);\n            $('#pwDialog').hide();\n        }\n        function onWebSocketOpen()\n        {\n            if (!appStarted)\n            {\n                sendActionMsg('getConnection', 'getConnection', {});\n                appStarted = true;\n            }\n        }\n        function onWebSocketClose()\n        {\n            wsConnectC();\n        }\n        function onWebSocketMessage(msg)\n        {\n            switch(msg.topic)\n            {\n                case 'getConnection':\n                    $('#connectedSSID').text(msg.payload);\n                    sendActionMsg('getNetworks', 'getNetworks', {});\n                    break;\n                case 'connectToNetwork':\n                    sendActionMsg('getConnection', 'getConnection', {});\n                    $('#ssid').attr('disabled',false);\n                    $('#ssidkey').attr('disabled',false);\n                    $('#ssidButton').attr('disabled',false);\n                    break;\n                default:\n                // code block\n            }\n        }\n        function setSsid()\n        {\n            var ssid = $('#ssid').val();\n            var ssidkey = $('#ssidkey').val();\n            sendActionMsg('connectToNetwork', 'connectToNetwork', {ssid:ssid, key:ssidkey});\n            $('#connectedSSID').text('');\n            $('#ssid').val('');\n            $('#ssid').attr('disabled',true);\n            $('#ssidkey').val('');\n            $('#ssidkey').attr('disabled',true);\n            $('#ssidButton').attr('disabled',true);\n            \n        }\n",
        "output": "str",
        "x": 510,
        "y": 460,
        "wires": [
            [
                "380c1491.22fa9c"
            ]
        ]
    },
    {
        "id": "380c1491.22fa9c",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "javascript",
        "field": "payload.javascript",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "{{{payload.script.global}}}\n",
        "output": "str",
        "x": 500,
        "y": 500,
        "wires": [
            [
                "4e6c8908.0524c8"
            ]
        ]
    },
    {
        "id": "41d7170c.80e638",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "body",
        "field": "payload.body",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "    <div width=\"100%\">\n        <div class='row' style='padding-bottom: 10px;'>\n            <div class='col-md-12' align='center'>\n{{{payload.html.wirelessSetup}}}\n            </div>\n        </div>\n    </div>\n",
        "output": "str",
        "x": 750,
        "y": 500,
        "wires": [
            [
                "28f9a36b.9e7a3c"
            ]
        ]
    },
    {
        "id": "930a7a63.11bf58",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "navBarIcon",
        "field": "payload.navBarIcon",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "basicYellow.png",
        "output": "str",
        "x": 230,
        "y": 460,
        "wires": [
            [
                "e1192fe0.96315"
            ]
        ]
    },
    {
        "id": "4e6c8908.0524c8",
        "type": "template",
        "z": "26093b29.39d8d4",
        "name": "html.wirelessSetup",
        "field": "payload.html.wirelessSetup",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "                <div class='card'>\n                    <div class='row'>\n                        <div class='col-md-2'>\n                        </div>\n                        <div class='col-md-8'>\n                            <p class='card-title'>Network Connection</p>\n                         </div>\n                        <div class='col-md-2'>\n                        </div>\n                    </div>\n                    <div class='card-body' align=\"center\">\n                        <div class='row' style='padding-bottom: 10px;'>\n                            <div class='col-md-6'>\n                                <span  class='card-text' >Connected to:</span>\n                            </div>\n                            <div class='col-md-6'>\n                                 <span  class='card-text' id='connectedSSID'>off/any</span>\n                            </div>\n                        </div>\n                        <div class='row' style='padding-bottom: 10px;'>\n                            <div class='col-md-4'>\n                                <span class=\"tableText\">SSID</span>\n                            </div>\n                            <div class='col-md-8'>\n                                <input class=\"form-control tableText\" id=\"ssid\" type=\"text\" value=\"\" />\n                             </div>\n                        </div>\n                        <div class='row' style='padding-bottom: 10px;'>\n                            <div class='col-md-4'>\n                                <span class=\"tableText\">KEY</span>\n                            </div>\n                            <div class='col-md-8'>\n                                <input class=\"form-control tableText\" id=\"ssidkey\" type=\"text\" value=\"\" />\n                             </div>\n                        </div>\n                        <div class='row' style='padding-bottom: 10px;'>\n                            <div class='col-md-4'>\n                            </div>\n                            <div class='col-md-6'>\n                                <button class='btn btn-block card-button big-text' id=\"ssidButton\" onclick=\"setSsid()\" >Connect & Reboot</button>\n                             </div>\n                            <div class='col-md-2'>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n",
        "output": "str",
        "x": 790,
        "y": 460,
        "wires": [
            [
                "41d7170c.80e638"
            ]
        ]
    },
    {
        "id": "ab64b0d5.c3fee",
        "type": "websocket in",
        "z": "26093b29.39d8d4",
        "name": "/setup/websocket",
        "server": "c427a7cd.35f1f8",
        "client": "",
        "x": 120,
        "y": 80,
        "wires": [
            [
                "dbec0823.672678"
            ]
        ]
    },
    {
        "id": "9bc013a4.b46c",
        "type": "websocket out",
        "z": "26093b29.39d8d4",
        "name": "/setup/websocket",
        "server": "c427a7cd.35f1f8",
        "client": "",
        "x": 1210,
        "y": 140,
        "wires": []
    },
    {
        "id": "dbec0823.672678",
        "type": "json",
        "z": "26093b29.39d8d4",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 270,
        "y": 80,
        "wires": [
            [
                "bb0701eb.a4b29"
            ]
        ]
    },
    {
        "id": "5ead619d.4bfff",
        "type": "switch",
        "z": "26093b29.39d8d4",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "getNetworks",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "getConnection",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "connectToNetwork",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 590,
        "y": 80,
        "wires": [
            [],
            [
                "6d4f56e0.04a238"
            ],
            [
                "71a17106.a018d"
            ]
        ]
    },
    {
        "id": "bb0701eb.a4b29",
        "type": "function",
        "z": "26093b29.39d8d4",
        "name": "set userId and topic",
        "func": "return {\n    topic   : msg.payload.topic, \n    userID  : msg.payload.userID,\n    payload : msg.payload.payload};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 80,
        "wires": [
            [
                "5ead619d.4bfff"
            ]
        ]
    },
    {
        "id": "71a17106.a018d",
        "type": "function",
        "z": "26093b29.39d8d4",
        "name": "Prepare WPA",
        "func": "var fileContents = 'ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev\\nupdate_config=1\\ncountry=SE\\n';\nfileContents = fileContents + 'network={\\n   ssid=\"' + msg.payload.ssid + '\"\\n   psk=\"' + msg.payload.key + '\"\\n}\\n'\nreturn {topic:msg.topic, payload:fileContents};",
        "outputs": 1,
        "noerr": 0,
        "x": 740,
        "y": 160,
        "wires": [
            [
                "3ef93a0f.951976"
            ]
        ]
    },
    {
        "id": "3ef93a0f.951976",
        "type": "file",
        "z": "26093b29.39d8d4",
        "name": "Write to ssid.conf",
        "filename": "/home/pi/ssid.conf",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 930,
        "y": 160,
        "wires": [
            [
                "4c1194c8.db057c"
            ]
        ]
    },
    {
        "id": "4c1194c8.db057c",
        "type": "exec",
        "z": "26093b29.39d8d4",
        "command": "sudo mv /home/pi/ssid.conf /etc/wpa_supplicant/wpa_supplicant.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "mv ssid to wpa",
        "x": 740,
        "y": 220,
        "wires": [
            [
                "1acb5f15.919f11"
            ],
            [],
            []
        ]
    },
    {
        "id": "1acb5f15.919f11",
        "type": "delay",
        "z": "26093b29.39d8d4",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 900,
        "y": 220,
        "wires": [
            [
                "20f7c462.3d395c"
            ]
        ]
    },
    {
        "id": "20f7c462.3d395c",
        "type": "exec",
        "z": "26093b29.39d8d4",
        "command": "sudo wpa_cli -i wlan0 reconfigure",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "wlan0 reconfigure",
        "x": 1070,
        "y": 220,
        "wires": [
            [
                "c80f01f0.2fe93"
            ],
            [],
            []
        ]
    },
    {
        "id": "c80f01f0.2fe93",
        "type": "delay",
        "z": "26093b29.39d8d4",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 740,
        "y": 300,
        "wires": [
            [
                "fa9ce40f.c3e948"
            ]
        ]
    },
    {
        "id": "fa9ce40f.c3e948",
        "type": "exec",
        "z": "26093b29.39d8d4",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 910,
        "y": 300,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "28f9a36b.9e7a3c",
        "type": "subflow:8341090a.df9758",
        "z": "26093b29.39d8d4",
        "name": "",
        "x": 1030,
        "y": 500,
        "wires": []
    },
    {
        "id": "1482e22f.57fa2e",
        "type": "http in",
        "z": "510a2b13.26f614",
        "name": "/blinky-thermo-cam",
        "url": "/blinky-thermo-cam",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 130,
        "y": 260,
        "wires": [
            [
                "71ce0943.81bf18"
            ]
        ]
    },
    {
        "id": "70be1872.dfaf48",
        "type": "http in",
        "z": "510a2b13.26f614",
        "name": "/apps",
        "url": "/apps",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 180,
        "wires": [
            [
                "af9642ae.0c0da"
            ]
        ]
    },
    {
        "id": "b1885d32.8d9cc",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "Body",
        "field": "payload.body",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- Body HTML -->\n    <div class='container' width=\"100%\">\n        <div class='row vert-pad' >\n            <div class='col-md-12'>\n                <a class=\"btn jumbotron-button btn-block big-text bold-text\" width='80%' href=\"/blinky-thermo-cam?name={{{payload.deviceAName}}}\" >\n                    <table width=\"100%\" alight=\"left\">\n                        <tr>\n                            <td width=\"30%\" align='center'> <img src=\"/img/thermoYellow.png\" height=\"70px\"/></td>\n                            <td width=\"70%\" align=\"left\">Blinky Thermo Cam {{{payload.deviceAName}}}</td>\n                        </tr>\n                    </table>\n                </a>\n            </div>\n        </div>\n        <div class='row vert-pad' >\n            <div class='col-md-12'>\n                <a class=\"btn jumbotron-button btn-block big-text bold-text\" width='80%' href=\"/setup\" >\n                    <table width=\"100%\" alight=\"left\">\n                        <tr>\n                            <td width=\"30%\" align='center'> <img src=\"/img/basicYellow.png\" height=\"70px\"/></td>\n                            <td width=\"70%\" align=\"left\">Setup</td>\n                        </tr>\n                    </table>\n                </a>\n            </div>\n        </div>\n    </div>",
        "output": "str",
        "x": 830,
        "y": 180,
        "wires": [
            [
                "348d20cf.1d85b"
            ]
        ]
    },
    {
        "id": "18e277b4.8fc208",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "Title",
        "field": "payload.title",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "Blinky Thermo Cam",
        "output": "str",
        "x": 550,
        "y": 180,
        "wires": [
            [
                "fd81c62c.98f018"
            ]
        ]
    },
    {
        "id": "f328fcb4.91dc",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "JavaScript",
        "field": "payload.javascript",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "        useWebSockets(false);\n        function onDocumentReady()\n        {\n        }\n        function onWebSocketOpen()\n        {\n        }\n        function onWebSocketClose()\n        {\n            \n        }\n        function onWebSocketMessage(msg)\n        {\n        }\n\n",
        "output": "str",
        "x": 410,
        "y": 180,
        "wires": [
            [
                "18e277b4.8fc208"
            ]
        ]
    },
    {
        "id": "fd81c62c.98f018",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "navBarIcon",
        "field": "payload.navBarIcon",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "thermoYellow.png",
        "output": "str",
        "x": 690,
        "y": 180,
        "wires": [
            [
                "b1885d32.8d9cc"
            ]
        ]
    },
    {
        "id": "ba79496e.4e42b8",
        "type": "exec",
        "z": "510a2b13.26f614",
        "command": "iwconfig",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1120,
        "y": 40,
        "wires": [
            [
                "25a2b2c8.26f4ce"
            ],
            [],
            []
        ]
    },
    {
        "id": "fc7d9351.a3d0a",
        "type": "inject",
        "z": "510a2b13.26f614",
        "name": "",
        "repeat": "5",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 960,
        "y": 40,
        "wires": [
            [
                "ba79496e.4e42b8"
            ]
        ]
    },
    {
        "id": "25a2b2c8.26f4ce",
        "type": "function",
        "z": "510a2b13.26f614",
        "name": "Get Signal Quality",
        "func": "var info = msg.payload;\nvar linkStartIndex  = info.indexOf('Link Quality=');\nvar levelStartIndex = info.indexOf('Signal level=');\nvar linkQuality = Number(info.substring(linkStartIndex + 13, linkStartIndex + 15));\nvar signalLevel =  Number(info.substring(levelStartIndex + 13, levelStartIndex + 16));\nvar ssid = info.substring(info.indexOf('ESSID') + 7);\nssid = ssid.substring(0,ssid.indexOf('\"'));\nvar val = {linkQuality : linkQuality, signalLevel: signalLevel, ssid:ssid};\nglobal.set('linkQuality',linkQuality);\nglobal.set('signalLevel', signalLevel);\nglobal.set('ssid', ssid);\nreturn {topic :'test',payload : val};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1300,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "cf44f6bf.8956b8",
        "type": "websocket in",
        "z": "510a2b13.26f614",
        "name": "/blinky-thermo-cam/websocket",
        "server": "44b51478.9c022c",
        "client": "",
        "x": 140,
        "y": 620,
        "wires": [
            [
                "ea909034.6fb25"
            ]
        ]
    },
    {
        "id": "62aaa250.9b67dc",
        "type": "websocket out",
        "z": "510a2b13.26f614",
        "name": "/blinky-thermo-cam/websocket",
        "server": "44b51478.9c022c",
        "client": "",
        "x": 830,
        "y": 620,
        "wires": []
    },
    {
        "id": "ea909034.6fb25",
        "type": "link out",
        "z": "510a2b13.26f614",
        "name": "Web socket out",
        "links": [
            "2f289f87.fe2ff",
            "c7f3b5bf.85c9a8"
        ],
        "x": 315,
        "y": 620,
        "wires": []
    },
    {
        "id": "d033193d.436d68",
        "type": "link in",
        "z": "510a2b13.26f614",
        "name": "Web socket in",
        "links": [
            "1cdcbcd8.9514e3",
            "78ceea9e.d0b204"
        ],
        "x": 635,
        "y": 620,
        "wires": [
            [
                "62aaa250.9b67dc"
            ]
        ]
    },
    {
        "id": "f14573da.0a788",
        "type": "inject",
        "z": "510a2b13.26f614",
        "name": "project",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "project",
        "payload": "PROJECT",
        "payloadType": "env",
        "x": 520,
        "y": 40,
        "wires": [
            [
                "938904a0.58d668"
            ]
        ]
    },
    {
        "id": "938904a0.58d668",
        "type": "function",
        "z": "510a2b13.26f614",
        "name": "Save global env variables",
        "func": "global.set(msg.topic,msg.payload);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 710,
        "y": 40,
        "wires": []
    },
    {
        "id": "71ce0943.81bf18",
        "type": "function",
        "z": "510a2b13.26f614",
        "name": "Set Name And Device Type",
        "func": "msg.payload['script'] = {};\nmsg.payload['script']['name'] = msg.payload.name\nmsg.payload['script']['deviceType'] = 'blinky-thermo-cam';\nmsg.payload['script']['project'] = global.get('project');\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 380,
        "y": 260,
        "wires": [
            [
                "6533b535.454c4c"
            ]
        ]
    },
    {
        "id": "c76a9544.852e88",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "Set Title",
        "field": "payload.title",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "Blinky Thermo Cam {{{payload.script.name}}}",
        "output": "str",
        "x": 320,
        "y": 340,
        "wires": [
            [
                "51e6893d.3db098"
            ]
        ]
    },
    {
        "id": "c98976c.3996888",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "script.global",
        "field": "payload.script.global",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "// Global Javascript\n        useWebSockets(true);\n        var mqttDevice = null;\n        var device = null;\n        var pingInterval = 5000;\n        var lastPing = 0;\n\n        var restfulDevice = \n        {\n            deviceType  : '{{{payload.script.deviceType}}}',\n            name        : '{{{payload.script.name}}}',\n            project     : '{{{payload.script.project}}}'\n        };\n\n        var plotConfig = \n        {\n            trace1Title : 'Temp (C)',\n            trace1Color : '#557a95',\n            trace1GridColor : '#beceda',\n            plotLength  : 600000,\n            width   : '',\n            height  :   '500',\n            htmlId  :   'historyStripChart'\n        };\n        let historyStripChart = new StripChart(plotConfig);\n\n        var colorScale = true;\n        var enhancementLevel = 0;\n        var pgm = null;\n        var imageArray = null;\n        var imageDelayChanged = false;\n\n        function onDocumentReady()\n        {\n            setRemoteApp(false);\n            if (remoteApp)\n            {\n                getCreds();\n                setInterval(function(){getCreds();}, 1000);\n            }\n            else\n            {\n                $('#userCardId').hide();\n            }\n            setInterval(function()\n            {\n                var now = new Date().getTime();\n                if ((now - lastPing) > pingInterval)\n                {\n                    lastPing = now;\n                    var actionMsg = \n                        {\n                            topic   : restfulDevice.project + '/' +  restfulDevice.deviceType + '/' +  restfulDevice.name + '/ping',\n                            payload : true\n                        };\n                    sendActionMsg('ping', 'ping', actionMsg);\n               }\n            }, 1000);\n            $('#imageDelayButtonId').hide();\n        }\n        function onWebSocketOpen()\n        {\n        }\n        function onWebSocketClose()\n        {\n            \n        }\n        function onWebSocketMessage(msg)\n        {\n            switch(msg.topic)\n            {\n                case 'readings':\n                    if ((msg.mqttDevice.name == restfulDevice.name) && (msg.mqttDevice.deviceType == restfulDevice.deviceType)  && (msg.mqttDevice.project == restfulDevice.project) )\n                    {\n                        lastPing = new Date().getTime();\n                        heartbeat();\n                        device = JSON.parse(pako.inflate(msg.payload, { to: 'string' }));\n                        mqttDevice = msg.mqttDevice;\n                        updateDmaReadings();\n                    }\n                    break;\n                case 'readDatabase':\n                    if (msg.userID == userID)\n                    {\n                    }\n                    break;\n                case 'renew':\n                    if (msg.userID == userID)\n                    {\n                        updateCookie(msg);\n                    }\n                    break;\n                case 'permissionError':\n                    if (msg.userID == userID)\n                    {\n                        acknowledgeDialog('Permission', 'Error', msg.payload);\n                    }\n                    break;\n                case 'loginExpired':\n                    if (msg.userID == userID)\n                    {\n                       location.reload();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        function sendSetting()\n        {\n            var actionMsg = \n                {\n                    topic   : mqttDevice.project + '/' +  mqttDevice.deviceType + '/' +  mqttDevice.name + '/setting',\n                    payload : pako.deflate(JSON.stringify(device))\n                };\n            sendActionMsg('setting','setting',actionMsg);\n       }\n        function setScalarValue(settingValue, attrName)\n        {\n            var settingAttr = device[attrName];\n            if ( (settingAttr.alarm.limits.lolo <= settingValue) && (settingValue <= settingAttr.alarm.limits.hihi) )\n            {\n                settingAttr.value = settingValue;\n                sendSetting();\n            } \n            else\n            {\n                acknowledgeDialog('Acknowledge', 'Error', 'Entry outside range! (' + settingAttr.alarm.limits.lolo.toString() + '-' + settingAttr.alarm.limits.hihi.toString() + ' ' + settingAttr.unit);\n            }\n        }\n        function reset(actionFlag)\n        {\n            var headerText = 'Warning';\n            var title = 'Resetting Tray';\n            var text = 'I hope you know what you are doing.';\n            var buttonTexts = ['Reset', 'Cancel'];\n            var buttonFunctions = \n            [\n                function()\n                {\n                    $( this ).dialog( \"close\" );\n                    setScalarValue(actionFlag, 'reset');\n                 }, \n                function()\n                {\n                    $( this ).dialog( \"close\" );\n                }\n            ];\n            if (actionFlag == 2)\n            {\n                title = 'Rebooting Tray';\n                buttonTexts[0] = 'Reboot';\n            }\n            optionDialog(headerText, title, text, buttonTexts, buttonFunctions);\n        }\n",
        "output": "str",
        "x": 630,
        "y": 300,
        "wires": [
            [
                "2b97e6dd.6d7b5a"
            ]
        ]
    },
    {
        "id": "1ee8ce74.b06fc2",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "script.editDevice",
        "field": "payload.script.editDevice",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "// Edit Temp JavaScript\n       $( function() \n        {\n            $( \"#editDeviceDialog\" ).dialog(\n                {\n//                    closeOnEscape: false,\n//                    open: function(event, ui) {$(\".ui-dialog-titlebar-close\", ui.dialog | ui).hide();},\n                    width:    640,\n                    autoOpen: false,\n                    buttons:\n                    [\n                        {\n                            text: \"Set\",\n                            click: function() {setDevice(); $( this ).dialog( \"close\" );},\n                            showText: false\n                        },\n                        {\n                            text: \"Cancel\",\n                            click: function() \n                            {\n                                $( this ).dialog( \"close\" ); \n                            },\n                            showText: false\n                        }\n                    ]\n                });\n        } );\n        function editDevice(attrName)\n        {\n            $( \"#editDeviceDialog\" ).dialog( \"option\", \"title\", \"Edit\"); \n            editedAttribute = attrName;\n            $( \"#editDeviceDialogAttribute\").html(attrName);\n\n            var attr = device[attrName];\n            $( \"#editValue\").val(attr.value);\n            $( \"#loloAlarm\").val(attr.alarm.limits.lolo);\n            $( \"#lowAlarm\").val(attr.alarm.limits.low);\n            $( \"#highAlarm\").val(attr.alarm.limits.high);\n            $( \"#hihiAlarm\").val(attr.alarm.limits.hihi);\n            $( \"#notifyName\").val(attr.alarm.notify.name);\n            $( \"#notifyNumber\").val(attr.alarm.notify.number);\n\n            $( \"#editDeviceDialog\" ).dialog( \"open\" );\n        }\n        function setDevice()\n        {\n            var attr = device[editedAttribute];\n            if (isNaN($('#loloAlarm').val()) \n                || isNaN($('#lowAlarm').val()) \n                || isNaN($('#highAlarm').val()) \n                || isNaN($('#hihiAlarm').val())\n                || isNaN($('#editValue').val()))\n            {\n                acknowledgeDialog('Error', 'Entry not a number!', editedAttribute);\n                editedAttribute = '';\n                return;\n            }\n            editedAttribute = '';\n\n            attr.value = Number($( \"#editValue\").val());\n            attr.alarm.limits.lolo = Number($( \"#loloAlarm\").val());\n            attr.alarm.limits.low = Number($( \"#lowAlarm\").val());\n            attr.alarm.limits.high = Number($( \"#highAlarm\").val());\n            attr.alarm.limits.hihi = Number($( \"#hihiAlarm\").val());\n            attr.alarm.notify.number =  $( \"#notifyNumber\").val();\n            attr.alarm.notify.name = $( \"#notifyName\").val();\n            sendSetting();\n        }\n",
        "output": "str",
        "x": 640,
        "y": 380,
        "wires": [
            [
                "2f9f8abf.a80656"
            ]
        ]
    },
    {
        "id": "c1034be9.37f0a8",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "javascript",
        "field": "payload.javascript",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "{{{payload.script.stripChartWidget}}}\n{{{payload.script.global}}}\n{{{payload.script.updateReadings}}}\n{{{payload.script.editDevice}}}\n{{{payload.script.user}}}\n",
        "output": "str",
        "x": 620,
        "y": 460,
        "wires": [
            [
                "fd846092.bca31"
            ]
        ]
    },
    {
        "id": "450b0136.7ccbd",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "body",
        "field": "payload.body",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "    <div width=\"100%\">\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12' align='center'>\n{{{payload.html.spectrogram}}}\n            </div>\n        </div>\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12' align='center'>\n{{{payload.html.controls}}}\n            </div>\n        </div>\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12' align='center'>\n{{{payload.html.history}}}\n            </div>\n        </div>\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12'>\n{{{payload.html.user}}}\n            </div>\n        </div>\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12'>\n{{{payload.html.wifimon}}}\n            </div>\n        </div>\n        <div class='row' style='padding-bottom: 25px;'>\n            <div class='col-md-12'>\n{{{payload.html.reset}}}\n            </div>\n        </div>\n    </div>",
        "output": "str",
        "x": 930,
        "y": 500,
        "wires": [
            [
                "4742fa12.8ee194"
            ]
        ]
    },
    {
        "id": "b6fcc866.328488",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.wifimon",
        "field": "payload.html.wifimon",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- Dashboard HTML -->\n                <div class='card'>\n                    <p class='card-title'>WiFi Connection</p>\n                    <div class='card-body' align=\"center\">\n                        <div class='row'  style='padding-top: 0px;'>\n                            <table width='100%'>\n                                <tr>\n                                    <td width='60%' >\n                                        <span class='card-text' >Device Update</span>\n                                    </td>\n                                    <td width='20%' align='center'></td>\n                                    <td width='20%' align='center'>\n                                        <img src='/img/heartRed.png' id='heartBeatID' width='100px' height='100px'/>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td width='60%' >\n                                        <span class='card-text' >Signal Level (dBm)</span>\n                                    </td>\n                                    <td width='20%' align='center'></td>\n                                    <td width='20%' align='center'>\n                                        <span class='card-text' id='signalLevelId' >-100</span>\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td width='60%' >\n                                        <span class='card-text' >Link Quality (/70)</span>\n                                    </td>\n                                    <td width='20%' align='center'></td>\n                                    <td width='20%' align='center'>\n                                        <span class='card-text' id='linkQualityId' >-1</span>\n                                    </td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n",
        "output": "str",
        "x": 950,
        "y": 420,
        "wires": [
            [
                "c273ba2f.eae8a8"
            ]
        ]
    },
    {
        "id": "6533b535.454c4c",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "navBarIcon",
        "field": "payload.navBarIcon",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "thermoYellow.png",
        "output": "str",
        "x": 330,
        "y": 300,
        "wires": [
            [
                "c76a9544.852e88"
            ]
        ]
    },
    {
        "id": "28cd98f1.2a1518",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.user",
        "field": "payload.html.user",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "                <div class='card' id='userCardId'>\n                    <div class='card-body' align=\"center\">\n                        <table width=\"100%\">\n                            <tr>\n                                <td  align=\"left\">\n                                     <span class='card-text' style='color:black;'>User:</span>\n                                </td>\n                                <td  align=\"right\">\n                                     <span class='card-text' id='usernameId'></span>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td  align=\"left\">\n                                    <span class='card-text' style='color:black;'>Time left:</span>\n                                </td>\n                                <td  align=\"right\">\n                                     <span class='card-text' id='expTimeId'></span>\n                                </td>\n                            </tr>\n                        </table>\n                        <table width=\"100%\">\n                            <tr>\n                                <td width=\"40%\">\n                                    <button class='btn btn-block card-button big-text' id='logoutButton' onclick=\"renew()\" >Renew</button>\n                                </td>\n                                <td width=\"10%\"></td>\n                                <td width=\"40%\">\n                                    <button class='btn btn-block card-button big-text' id='logoutButton' onclick=\"logout()\" >Logout</button>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n",
        "output": "str",
        "x": 940,
        "y": 380,
        "wires": [
            [
                "b6fcc866.328488"
            ]
        ]
    },
    {
        "id": "2f9f8abf.a80656",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "script.user",
        "field": "payload.script.user",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "        function getCreds()\n        {\n            var now = new Date().getTime();\n            var expDate = Number(getCookie('ExpDate'));\n            if (expDate > 0)\n            {\n                expDate = expDate - now;\n                if(expDate < 0)\n                {\n                    logout();\n                }\n                else\n                {\n                    var hours = Math.floor(expDate / 3600000);\n                    var minutes = expDate - hours * 3600000;\n                    minutes = Math.floor(minutes / 60000);\n                    var seconds = expDate - (hours * 3600000) - (minutes * 60000);\n                    seconds = Math.floor(seconds / 1000);\n                    hours = hours.toString();\n                    if (hours.length == 1) hours = '0' + hours; \n                    minutes = minutes.toString();\n                    if (minutes.length == 1) minutes = '0' + minutes; \n                    seconds = seconds.toString();\n                    if (seconds.length == 1) seconds = '0' + seconds; \n                    var timeString = hours + ':' + minutes + ':' + seconds;\n                    $('#usernameId').text(getCookie('Username'));\n                    $('#expTimeId').text(timeString);\n                }\n            }\n            else\n            {\n                $('#usernameId').text(getCookie('Username'));\n                $('#expTimeId').text('Forever');\n            }\n        }\n        function logout()\n        {\n            document.cookie = project + \"Role= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n            document.cookie = project + \"ExpDate= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n            document.cookie = project + \"Username= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n            window.location.href = \"/\";\n        }\n        function renew()\n        {\n            var actionMsg = {};\n            sendActionMsg('renew', 'renew', actionMsg);\n        }\n        function updateCookie(msg)\n        {\n            document.cookie = project + \"Role=\" + msg.role;\n            document.cookie = project + \"ExpDate=\" + msg.expDate;\n            document.cookie = project + \"Username=\" + msg.username;\n        }\n        function downloadToken()\n        {\n            downloadString(getCookie(\"Role\"), \"text/plain\", project + \"-token.txt\");\n        }\n// from https://gist.github.com/danallison/3ec9d5314788b337b682\n        function downloadString(text, fileType, fileName) \n        {\n            var blob = new Blob([text], { type: fileType });\n            \n            var a = document.createElement('a');\n            a.download = fileName;\n            a.href = URL.createObjectURL(blob);\n            a.dataset.downloadurl = [fileType, a.download, a.href].join(':');\n            a.style.display = \"none\";\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            setTimeout(function() { URL.revokeObjectURL(a.href); }, 1500);\n        }",
        "output": "str",
        "x": 630,
        "y": 420,
        "wires": [
            [
                "c1034be9.37f0a8"
            ]
        ]
    },
    {
        "id": "c634a8d3.297848",
        "type": "http in",
        "z": "510a2b13.26f614",
        "name": "/",
        "url": "/",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "ca68de71.c19fe"
            ]
        ]
    },
    {
        "id": "65a7590b.59a2a8",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "Body",
        "field": "payload.body",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- Body HTML -->\n",
        "output": "str",
        "x": 830,
        "y": 120,
        "wires": [
            [
                "50658379.d83e4c"
            ]
        ]
    },
    {
        "id": "9709fa69.9daac8",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "Title",
        "field": "payload.title",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "Blinky Thermo Cam",
        "output": "str",
        "x": 550,
        "y": 120,
        "wires": [
            [
                "a36869fc.6f5e58"
            ]
        ]
    },
    {
        "id": "ca68de71.c19fe",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "JavaScript",
        "field": "payload.javascript",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "        useWebSockets(false);\n        function onDocumentReady()\n        {\n            window.location = '/apps'\n        }\n        function onWebSocketOpen()\n        {\n        }\n        function onWebSocketClose()\n        {\n            \n        }\n        function onWebSocketMessage(msg)\n        {\n        }\n\n",
        "output": "str",
        "x": 410,
        "y": 120,
        "wires": [
            [
                "9709fa69.9daac8"
            ]
        ]
    },
    {
        "id": "a36869fc.6f5e58",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "navBarIcon",
        "field": "payload.navBarIcon",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "thermoYellow.png",
        "output": "str",
        "x": 690,
        "y": 120,
        "wires": [
            [
                "65a7590b.59a2a8"
            ]
        ]
    },
    {
        "id": "c273ba2f.eae8a8",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.reset",
        "field": "payload.html.reset",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "                <div class='card' id='reset'>\n                    <div class='card-body' align=\"center\">\n                         <table width=\"100%\">\n                            <tr>\n                                <td width=\"40%\">\n                                    <button class='btn btn-block card-button big-text' onclick=\"reset(1)\" >Reset</button>\n                                </td>\n                                <td width=\"10%\"></td>\n                                <td width=\"40%\">\n                                    <button class='btn btn-block card-button big-text' onclick=\"reset(2)\" >Reboot</button>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n",
        "output": "str",
        "x": 940,
        "y": 460,
        "wires": [
            [
                "450b0136.7ccbd"
            ]
        ]
    },
    {
        "id": "c87aa87d.aef928",
        "type": "inject",
        "z": "510a2b13.26f614",
        "name": "deviceA",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "deviceA",
        "payload": "MQTTDEVICEA",
        "payloadType": "env",
        "x": 120,
        "y": 40,
        "wires": [
            [
                "fdfbcac7.35b388"
            ]
        ]
    },
    {
        "id": "fdfbcac7.35b388",
        "type": "function",
        "z": "510a2b13.26f614",
        "name": "Init device name",
        "func": "var mqttSplit = msg.payload.split('/');\nvar deviceProps = {\n    project     :   mqttSplit[0],\n    deviceType  :   mqttSplit[1],\n    name        :   mqttSplit[2],\n};\nflow.set(msg.topic + 'Props',deviceProps);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 280,
        "y": 40,
        "wires": []
    },
    {
        "id": "af9642ae.0c0da",
        "type": "function",
        "z": "510a2b13.26f614",
        "name": "Device Names",
        "func": "msg.payload['deviceAName'] = flow.get('deviceAProps').name;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 240,
        "y": 180,
        "wires": [
            [
                "f328fcb4.91dc"
            ]
        ]
    },
    {
        "id": "93049b70.2dc5c8",
        "type": "mqtt out",
        "z": "4c1c8ca0.447d94",
        "name": "Publish Readings",
        "topic": "",
        "qos": "0",
        "retain": "false",
        "broker": "79250bf3.365cc4",
        "x": 1310,
        "y": 420,
        "wires": []
    },
    {
        "id": "30f384ea.cf21fc",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Save device config in Memory",
        "func": "msg.payload.reset.value = 0;\nmsg.payload.manualTrigger.value = 0;\nmsg.payload.imageData.value = null;\nflow.set('device', msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 850,
        "y": 60,
        "wires": [
            [
                "89892a30.598e28",
                "88611815.916988"
            ]
        ]
    },
    {
        "id": "9115ea87.0ca208",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Readings Alarm Scan",
        "func": "if (!msg.payload) return null;\nvar device = flow.get('device');\ndevice.linkQuality.value     = global.get('linkQuality');\ndevice.signalLevel.value     = global.get('signalLevel');\nscalarAlarmScan(device, 'reading');\nvar newMsg = \n{\n    topic: flow.get('deviceProps').project + '/' + flow.get('deviceProps').deviceType + '/' + flow.get('deviceProps').name + '/reading',\n    payload: JSON.stringify(device)\n}\nreturn newMsg;\n\nfunction getActionArray(device, type, actionType)\n{\n    var actionArray = [];\n    var keys = Object.keys(device);\n    for (var ii = 0; ii < keys.length; ++ii)\n    {\n        if (device[keys[ii]].hasOwnProperty('type'))\n        {\n            if (device[keys[ii]].type == type)\n            {\n                if (device[keys[ii]].action == actionType)\n                {\n                    actionArray.push(device[keys[ii]]);\n                }\n            }\n        }\n    }\n    return actionArray;\n}\nfunction scalarAlarmScan(device, actionType)\n{\n    var actionArray = getActionArray(device, 'scalar', actionType);\n    if (actionArray.length > 0)\n    {\n        for (var ii = 0; ii < actionArray.length; ++ii)\n        {\n            actionArray[ii].alarm.value = 0;\n            if (!isNaN(actionArray[ii].value))\n            {\n                if (actionArray[ii].value < actionArray[ii].alarm.limits.low)  actionArray[ii].alarm.value = 1;\n                if (actionArray[ii].value < actionArray[ii].alarm.limits.lolo) actionArray[ii].alarm.value = 3;\n                if (actionArray[ii].value > actionArray[ii].alarm.limits.high) actionArray[ii].alarm.value = 2;\n                if (actionArray[ii].value > actionArray[ii].alarm.limits.hihi) actionArray[ii].alarm.value = 4;\n            }\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 420,
        "wires": [
            [
                "d976b431.f90598"
            ]
        ]
    },
    {
        "id": "a3ff8e5.b79de7",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Prepare MQTT topic",
        "func": "var mqttArray = msg.topic.split('/');\nvar device = \n{\n    project     : mqttArray[0],\n    deviceType  : mqttArray[1],\n    name        : mqttArray[2],\n    prop        : mqttArray[3],\n};\nreturn {topic : msg.topic, payload:{topic:'readings', mqttDevice : device, payload:msg.payload}};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1320,
        "y": 480,
        "wires": [
            [
                "1cdcbcd8.9514e3"
            ]
        ]
    },
    {
        "id": "5023092b.a0fe38",
        "type": "mqtt in",
        "z": "4c1c8ca0.447d94",
        "name": "Subscribe DeviceA",
        "topic": "$(MQTTDEVICEA)",
        "qos": "0",
        "datatype": "auto",
        "broker": "79250bf3.365cc4",
        "x": 130,
        "y": 160,
        "wires": [
            [
                "257906ae.f6991a"
            ]
        ]
    },
    {
        "id": "49c7b59e.00e86c",
        "type": "inject",
        "z": "4c1c8ca0.447d94",
        "name": "deviceA",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "deviceA",
        "payload": "MQTTDEVICEA",
        "payloadType": "env",
        "x": 120,
        "y": 60,
        "wires": [
            [
                "f7b2b73c.569598"
            ]
        ]
    },
    {
        "id": "4a8d91e8.fcb68",
        "type": "file in",
        "z": "4c1c8ca0.447d94",
        "name": "Read device config",
        "filename": "",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "x": 490,
        "y": 60,
        "wires": [
            [
                "4b0be623.7f7b88"
            ]
        ]
    },
    {
        "id": "4b0be623.7f7b88",
        "type": "json",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 650,
        "y": 60,
        "wires": [
            [
                "30f384ea.cf21fc"
            ]
        ]
    },
    {
        "id": "f7b2b73c.569598",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Init flow Variables",
        "func": "var mqttSplit = msg.payload.split('/');\nvar deviceProps = {\n    project     :   mqttSplit[0],\n    deviceType  :   mqttSplit[1],\n    name        :   mqttSplit[2],\n    configFile  :   mqttSplit[1] + '-' + mqttSplit[2] + '.json'\n};\nflow.set('deviceProps',deviceProps);\nflow.set('resettingCamera',true);\nflow.set('cameraInUse',false);\nflow.set('lastTriggerTime',new Date().getTime());\nflow.set('cameraProcess', {fill: 'none', pid:'none'});\nflow.set('imageFileCounter',0);\nreturn {topic: 'readFile', 'filename':deviceProps.configFile};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 60,
        "wires": [
            [
                "4a8d91e8.fcb68"
            ]
        ]
    },
    {
        "id": "257906ae.f6991a",
        "type": "json",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 290,
        "y": 160,
        "wires": [
            [
                "c2106663.a49658"
            ]
        ]
    },
    {
        "id": "c2106663.a49658",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Filter MQTT",
        "func": "return {topic:msg.topic.split('/')[3], payload:msg.payload};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 430,
        "y": 160,
        "wires": [
            [
                "9e75e21c.458df"
            ]
        ]
    },
    {
        "id": "9e75e21c.458df",
        "type": "switch",
        "z": "4c1c8ca0.447d94",
        "name": "mqtt topic",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "setting",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "ping",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 620,
        "y": 160,
        "wires": [
            [
                "42c6e9ce.4932e8"
            ],
            [
                "2e244da9.636962"
            ]
        ]
    },
    {
        "id": "168ce872.83d788",
        "type": "file",
        "z": "4c1c8ca0.447d94",
        "name": "Init Settings",
        "filename": "",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 1590,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "89892a30.598e28",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Make Pretty",
        "func": "var deviceCopy = JSON.parse(JSON.stringify(msg.payload));\ndeviceCopy.reset.value = 0;\ndeviceCopy.manualTrigger.value = 0;\ndeviceCopy.imageData.value = null;\nvar jsonPretty = JSON.stringify(deviceCopy,null,2);\nreturn {topic: msg.payload, payload:jsonPretty, 'filename':flow.get('deviceProps').configFile};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1430,
        "y": 140,
        "wires": [
            [
                "168ce872.83d788"
            ]
        ]
    },
    {
        "id": "d2572e9a.d2ef9",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Settings Alarm Scan",
        "func": "scalarAlarmScan(msg.payload, 'setting');\nflow.set('device', msg.payload); \nflow.set('newSetting', 1); \nreturn msg;\n\nfunction getActionArray(device, type, actionType)\n{\n    var actionArray = [];\n    var keys = Object.keys(device);\n    for (var ii = 0; ii < keys.length; ++ii)\n    {\n        if (device[keys[ii]].hasOwnProperty('type'))\n        {\n            if (device[keys[ii]].type == type)\n            {\n                if (device[keys[ii]].action == actionType)\n                {\n                    actionArray.push(device[keys[ii]]);\n                }\n            }\n        }\n    }\n    return actionArray;\n}\nfunction scalarAlarmScan(device, actionType)\n{\n    var actionArray = getActionArray(device, 'scalar', actionType);\n    if (actionArray.length > 0)\n    {\n        for (var ii = 0; ii < actionArray.length; ++ii)\n        {\n            actionArray[ii].alarm.value = 0;\n            if (!isNaN(actionArray[ii].value))\n            {\n                if (actionArray[ii].value < actionArray[ii].alarm.limits.low)  actionArray[ii].alarm.value = 1;\n                if (actionArray[ii].value < actionArray[ii].alarm.limits.lolo) actionArray[ii].alarm.value = 3;\n                if (actionArray[ii].value > actionArray[ii].alarm.limits.high) actionArray[ii].alarm.value = 2;\n                if (actionArray[ii].value > actionArray[ii].alarm.limits.hihi) actionArray[ii].alarm.value = 4;\n            }\n        }\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1240,
        "y": 140,
        "wires": [
            [
                "89892a30.598e28",
                "557e4f40.b904e"
            ]
        ]
    },
    {
        "id": "2f289f87.fe2ff",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Device A web socket in",
        "links": [
            "ea909034.6fb25"
        ],
        "x": 55,
        "y": 260,
        "wires": [
            [
                "f812bb6a.1aec68"
            ]
        ]
    },
    {
        "id": "f812bb6a.1aec68",
        "type": "json",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 150,
        "y": 260,
        "wires": [
            [
                "87f08687.b6d578"
            ]
        ]
    },
    {
        "id": "1cdcbcd8.9514e3",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "Device A web socket out",
        "links": [
            "d033193d.436d68"
        ],
        "x": 1455,
        "y": 480,
        "wires": []
    },
    {
        "id": "d976b431.f90598",
        "type": "gzip",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "x": 1110,
        "y": 420,
        "wires": [
            [
                "93049b70.2dc5c8",
                "a3ff8e5.b79de7"
            ]
        ]
    },
    {
        "id": "42c6e9ce.4932e8",
        "type": "gzip",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "x": 770,
        "y": 140,
        "wires": [
            [
                "cd99fe0e.38599"
            ]
        ]
    },
    {
        "id": "cd99fe0e.38599",
        "type": "json",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 890,
        "y": 140,
        "wires": [
            [
                "e99e4b49.1f2588",
                "18a5f742.0972b9"
            ]
        ]
    },
    {
        "id": "da43afe.8d4f85",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Filter Websocket",
        "func": "var inputDeviceProps = msg.payload.topic.split('/');\nvar deviceProps = flow.get('deviceProps')\nif (inputDeviceProps[0] != deviceProps.project) return null;\nif (inputDeviceProps[1] != deviceProps.deviceType) return null;\nif (inputDeviceProps[2] != deviceProps.name) return null;\nreturn {topic:msg.topic, payload:msg.payload.payload};\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 470,
        "y": 260,
        "wires": [
            [
                "9e75e21c.458df"
            ]
        ]
    },
    {
        "id": "87f08687.b6d578",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Shift Msg",
        "func": "return msg.payload;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 290,
        "y": 260,
        "wires": [
            [
                "da43afe.8d4f85"
            ]
        ]
    },
    {
        "id": "c0939e4a.6386f",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "pm2 restart red",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Restart",
        "x": 1160,
        "y": 220,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "9e290594.69c548",
        "type": "switch",
        "z": "4c1c8ca0.447d94",
        "name": "Reset Tray",
        "property": "payload.reset.value",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 970,
        "y": 240,
        "wires": [
            [
                "c0939e4a.6386f"
            ],
            [
                "236a8168.66f7fe"
            ]
        ]
    },
    {
        "id": "236a8168.66f7fe",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Reboot",
        "x": 1160,
        "y": 280,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "557e4f40.b904e",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 960,
        "y": 200,
        "wires": [
            [
                "9e290594.69c548"
            ]
        ]
    },
    {
        "id": "242fb7ee.ec2318",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "flirLepton25i2c/flirLepton25i2c.exe setFfcStateToManual",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "setFfcStateToManual",
        "x": 480,
        "y": 600,
        "wires": [
            [
                "1cc9fd62.227313"
            ],
            [],
            []
        ]
    },
    {
        "id": "6abb16.fc9774ec",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "flirLepton25i2c/flirLepton25i2c.exe reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "reboot",
        "x": 150,
        "y": 600,
        "wires": [
            [
                "e1d61d76.3569b"
            ],
            [],
            []
        ]
    },
    {
        "id": "e1d61d76.3569b",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 300,
        "y": 600,
        "wires": [
            [
                "242fb7ee.ec2318"
            ]
        ]
    },
    {
        "id": "1cc9fd62.227313",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 680,
        "y": 600,
        "wires": [
            [
                "82484d70.a7df"
            ]
        ]
    },
    {
        "id": "82484d70.a7df",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "flirLepton25i2c/flirLepton25i2c.exe performFfc",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "performFfc",
        "x": 830,
        "y": 600,
        "wires": [
            [
                "dc342449.ddba88"
            ],
            [],
            []
        ]
    },
    {
        "id": "dc342449.ddba88",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1000,
        "y": 600,
        "wires": [
            [
                "4532c4da.1b43ac",
                "144bce3e.f1c012"
            ]
        ]
    },
    {
        "id": "4532c4da.1b43ac",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "clear camera reset",
        "func": "flow.set('resettingCamera',false);\nreturn msg;",
        "outputs": 0,
        "noerr": 0,
        "x": 1170,
        "y": 600,
        "wires": []
    },
    {
        "id": "88611815.916988",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "init complete",
        "links": [
            "249ebb41.0fd534"
        ],
        "x": 1075,
        "y": 60,
        "wires": []
    },
    {
        "id": "249ebb41.0fd534",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "init camera in",
        "links": [
            "88611815.916988",
            "a9ba07c0.2737f8",
            "69c47bae.941b24"
        ],
        "x": 55,
        "y": 600,
        "wires": [
            [
                "6abb16.fc9774ec",
                "f096f02d.508c5"
            ]
        ]
    },
    {
        "id": "f3ff0af9.c4fdb8",
        "type": "rpi-gpio out",
        "z": "4c1c8ca0.447d94",
        "name": "Yellow LED",
        "pin": "33",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "x": 170,
        "y": 360,
        "wires": []
    },
    {
        "id": "316e94c2.271bec",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Yellow Led In",
        "links": [
            "30a567e5.1d7ed8",
            "d9b1bb3f.ca7528",
            "db05df01.f76e1",
            "c7378244.9d05",
            "e880ae95.bdd76"
        ],
        "x": 55,
        "y": 360,
        "wires": [
            [
                "f3ff0af9.c4fdb8"
            ]
        ]
    },
    {
        "id": "73e006b1.cf7528",
        "type": "rpi-gpio out",
        "z": "4c1c8ca0.447d94",
        "name": "Red LED",
        "pin": "37",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "x": 160,
        "y": 420,
        "wires": []
    },
    {
        "id": "19963a75.2b0f46",
        "type": "rpi-gpio out",
        "z": "4c1c8ca0.447d94",
        "name": "Blue LED",
        "pin": "35",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "x": 160,
        "y": 480,
        "wires": []
    },
    {
        "id": "7af84ca8.ba5584",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Red LED In",
        "links": [
            "d9b1bb3f.ca7528",
            "e7beb734.ed9628",
            "7667b964.83dff8",
            "db05df01.f76e1",
            "c7378244.9d05"
        ],
        "x": 55,
        "y": 420,
        "wires": [
            [
                "73e006b1.cf7528"
            ]
        ]
    },
    {
        "id": "cb51837e.00842",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Blue LED In",
        "links": [
            "d9b1bb3f.ca7528",
            "69b81e64.314a7",
            "db05df01.f76e1",
            "c7378244.9d05",
            "a99063ba.90a37",
            "41fe535d.8de9ac"
        ],
        "x": 55,
        "y": 480,
        "wires": [
            [
                "19963a75.2b0f46"
            ]
        ]
    },
    {
        "id": "f096f02d.508c5",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set 1",
        "func": "return {topic:'turnOn', payload:1};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 150,
        "y": 660,
        "wires": [
            [
                "db05df01.f76e1"
            ]
        ]
    },
    {
        "id": "db05df01.f76e1",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "Start FCC out",
        "links": [
            "316e94c2.271bec",
            "7af84ca8.ba5584",
            "cb51837e.00842"
        ],
        "x": 235,
        "y": 660,
        "wires": []
    },
    {
        "id": "144bce3e.f1c012",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set 0",
        "func": "return {topic:'turnOn', payload:0};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1130,
        "y": 660,
        "wires": [
            [
                "c7378244.9d05"
            ]
        ]
    },
    {
        "id": "c7378244.9d05",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "FCC complete out",
        "links": [
            "316e94c2.271bec",
            "7af84ca8.ba5584",
            "cb51837e.00842"
        ],
        "x": 1215,
        "y": 660,
        "wires": []
    },
    {
        "id": "89cfd52.1eb2928",
        "type": "inject",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "120",
        "crontab": "",
        "once": true,
        "onceDelay": "120",
        "topic": "Init FFC",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 800,
        "wires": [
            [
                "1ee58b30.404be5",
                "38ff25f5.65419a"
            ]
        ]
    },
    {
        "id": "1ee58b30.404be5",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "hold capture",
        "func": "flow.set('resettingCamera',true);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 350,
        "y": 800,
        "wires": [
            [
                "808c8caf.d76fb"
            ]
        ]
    },
    {
        "id": "2fcf61df.b03cce",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "1500",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 700,
        "y": 780,
        "wires": [
            [
                "bef6edc2.3d633",
                "c9309be.7782e68"
            ]
        ]
    },
    {
        "id": "808c8caf.d76fb",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "flirLepton25i2c/flirLepton25i2c.exe performFfc",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "performFfc",
        "x": 510,
        "y": 800,
        "wires": [
            [
                "2fcf61df.b03cce"
            ],
            [],
            []
        ]
    },
    {
        "id": "bef6edc2.3d633",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "resume capture",
        "func": "flow.set('resettingCamera',false);\nreturn msg;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 920,
        "y": 780,
        "wires": []
    },
    {
        "id": "38ff25f5.65419a",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "set to 1",
        "func": "msg.payload = 1;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 360,
        "y": 860,
        "wires": [
            [
                "e880ae95.bdd76"
            ]
        ]
    },
    {
        "id": "c9309be.7782e68",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "set to 0",
        "func": "msg.payload = 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 820,
        "wires": [
            [
                "e880ae95.bdd76"
            ]
        ]
    },
    {
        "id": "e880ae95.bdd76",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "FFC Toggle Out",
        "links": [
            "316e94c2.271bec"
        ],
        "x": 535,
        "y": 860,
        "wires": []
    },
    {
        "id": "fe5df31e.a773",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Process Data",
        "func": "device = flow.get('device');\ndevice.imageData.value = null;\ndevice.archiveData.value = 0;\n\nif (msg.payload.length < 1)\n{\n    var errCount = context.get('errCount');\n    if (errCount == undefined) errCount = 0;\n    ++errCount\n    if (errCount < 3)\n    {\n        context.set('errCount',errCount);\n        return [null, null];\n    }\n    else\n    {\n        context.set('errCount',0);\n        node.warn(\"Resetting Camera\");\n        flow.set('resettingCamera',true);\n        return [null, {topic:'resetCamera',payload:true}];\n    }\n}\nelse\n{\n    context.set('errCount',0);\n}\nvar imgArray = [];\nvar dataView     = new DataView(new ArrayBuffer(2));\nvar ndataPts = 4800 * device.resMode.value * device.resMode.value;\nvar nrows = 60 * device.resMode.value;\nvar ncols = 80 * device.resMode.value;\nfor (var irow = 0; irow < ndataPts; ++irow)\n{\n        dataView.setUint8(0, msg.payload[irow * 2]);\n        dataView.setUint8(1, msg.payload[irow * 2 + 1]);\n        imgArray[irow] = dataView.getUint16(0);\n}\nvar minval = imgArray[0];\nvar maxval = imgArray[0];\nfor (var irow = 0; irow < ndataPts; ++irow)\n{\n        if ( minval > imgArray[irow]) minval = imgArray[irow];\n        if ( maxval < imgArray[irow]) maxval = imgArray[irow];\n}\nif (minval == 0) return [null, null];\nif (device.scaleMode.value == 0)\n{\n    minval = Math.round(100.0 * device.pixelMin.value + 27315);\n    maxval = Math.round(100.0 * device.pixelMax.value + 27315);\n}\n\nvar imgArray2D = [];\nvar deltaVal = maxval - minval;\nif (deltaVal == 0) deltaVal = 1;\nfor (var irow = 0; irow < nrows; ++irow)\n{\n    imgArray2D[irow] = [];\n    for (var icol = 0; icol < ncols; ++icol)\n    {\n        imgArray2D[irow][icol] = Math.floor(256.0 * (imgArray[irow * ncols + icol] - minval) / deltaVal);\n        if (imgArray2D[irow][icol] < 0)   imgArray2D[irow][icol] = 0;\n        if (imgArray2D[irow][icol] > 255) imgArray2D[irow][icol] = 255;\n    }    \n}\nvar imgArray2DT = [];\nif (device.transpose.value == 1)\n{\n    for (var icol = 0; icol < ncols; ++icol)\n    {\n        imgArray2DT[icol] = [];\n        for (var irow = 0; irow < nrows; ++irow)\n        {\n            imgArray2DT[icol][irow] = imgArray2D[irow][icol];\n        }\n    }\n    imgArray2D = imgArray2DT;\n    var tempNrows = nrows;\n    nrows = ncols;\n    ncols = tempNrows; \n}\nvar imgArray2DFV = [];\nif (device.flipVertical.value == 1)\n{\n    for (var irow = 0; irow < nrows; ++irow)\n    {\n        imgArray2DFV[irow] = [];\n        for (var icol = 0; icol < ncols; ++icol)\n        {\n            imgArray2DFV[irow][icol] = imgArray2D[nrows - irow - 1][icol];\n        }    \n    }\n    imgArray2D = imgArray2DFV;\n}\nvar imgArray2DFH = [];\nif (device.flipHorizontal.value == 1)\n{\n    for (var irow = 0; irow < nrows; ++irow)\n    {\n        imgArray2DFH[irow] = [];\n        for (var icol = 0; icol < ncols; ++icol)\n        {\n            imgArray2DFH[irow][icol] = imgArray2D[irow][ncols - icol - 1];\n        }    \n    }\n    imgArray2D = imgArray2DFH;\n}\nvar pgm = \n{\n    'type'      : 'P2',\n    'timeStamp' : new Date().getTime(),\n    'nrows'     : nrows,\n    'ncols'     : ncols,\n    'minval'    : minval,\n    'maxval'    : maxval,\n    'imageArray': imgArray2D\n};\ndevice.manualTrigger.value = 0;\ndevice.imageData.value = pgm;\ndevice.archiveData.value = 1;\nif (device.scaleMode.value == 1)\n{\n    device.pixelMin.value = Math.round(0.1 *  (pgm.minval - 27315) ) / 10;\n    device.pixelMax.value  = Math.round(0.1 *  (pgm.maxval - 27315) ) / 10;\n}\ndevice.timeStamp = pgm.timeStamp;\n\nreturn [{topic:'takeImageSuccess',payload:true}, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 600,
        "y": 1340,
        "wires": [
            [
                "1b5d4073.38d0d",
                "876b5ce6.0889f"
            ],
            [
                "a9ba07c0.2737f8"
            ]
        ]
    },
    {
        "id": "e7605d.fa67cfa",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "Capture Flir image",
        "x": 650,
        "y": 1200,
        "wires": [
            [
                "fe5df31e.a773",
                "4983dfa0.ae56b"
            ],
            [
                "4983dfa0.ae56b"
            ],
            []
        ]
    },
    {
        "id": "26385995.f6c7e6",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Get camera process",
        "func": "var newMsg = {fill: 'none', pid:'none'}\nif ((\"fill\" in msg.status)) \n{\n    newMsg.fill = msg.status.fill;\n    newMsg.pid = msg.status.text;\n}\nflow.set('cameraProcess', newMsg);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 280,
        "y": 1120,
        "wires": []
    },
    {
        "id": "615d489b.7be438",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 700,
        "y": 1140,
        "wires": [
            [
                "4c249217.371ccc"
            ]
        ]
    },
    {
        "id": "4c249217.371ccc",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Check if Process hung",
        "func": "var process = flow.get('cameraProcess');\nvar newMsg = null;\nif (process.pid != 'none')\n{\n    var pid = Number(process.pid.substring(4)) + 0;\n    newMsg = {topic:'killProcess',payload:pid}\n    node.warn('Camera Hang')\n    node.warn(newMsg)\n}\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 900,
        "y": 1140,
        "wires": [
            [
                "51a5d6fa.668fd8",
                "f356c11b.05aed"
            ]
        ]
    },
    {
        "id": "51a5d6fa.668fd8",
        "type": "exec",
        "z": "4c1c8ca0.447d94",
        "command": "kill -9",
        "addpay": true,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1090,
        "y": 1140,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "25c0c471.5d5bcc",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Capture Flir image In",
        "links": [
            "7954081a.e8ed48",
            "217bb4e6.bc7ffc",
            "81763557.747698"
        ],
        "x": 55,
        "y": 1200,
        "wires": [
            [
                "f09c19da.79ebb8"
            ]
        ]
    },
    {
        "id": "7954081a.e8ed48",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "target distance out",
        "links": [
            "25c0c471.5d5bcc"
        ],
        "x": 1315,
        "y": 980,
        "wires": []
    },
    {
        "id": "6b1cc26f.a523dc",
        "type": "inject",
        "z": "4c1c8ca0.447d94",
        "name": "Manual Camera trigger",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "60",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 980,
        "wires": [
            [
                "3a4fbc63.f80944"
            ]
        ]
    },
    {
        "id": "36e889a9.df4dd6",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Check for camera reset",
        "func": "if (flow.get('resettingCamera')) return null;\nif (flow.get('cameraInUse')) return null;\nflow.set('cameraInUse',true);\nflow.get('device').archiveData.value = 0;\nmsg.payload = \"\"\nif (flow.get('device').resMode.value == 1) msg.payload = \"flirLepton25capture/flirLepton25capture.exe\"\nif (flow.get('device').resMode.value == 2) msg.payload = \"flirLepton35capture/flirLepton35capture.exe\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 1200,
        "wires": [
            [
                "e7605d.fa67cfa",
                "615d489b.7be438",
                "f4d3d03d.e16e2"
            ]
        ]
    },
    {
        "id": "f356c11b.05aed",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Try Manual Trigger Again",
        "func": "if (flow.get('device').manualTrigger.value == 1) return {topic:'manualTrigger',payload:true}\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 790,
        "y": 1040,
        "wires": [
            [
                "7aa7f85.2101208"
            ]
        ]
    },
    {
        "id": "7aa7f85.2101208",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 980,
        "y": 1040,
        "wires": [
            [
                "7954081a.e8ed48"
            ]
        ]
    },
    {
        "id": "bfc9a6c.b3b1f58",
        "type": "inject",
        "z": "4c1c8ca0.447d94",
        "name": "5 Hz",
        "repeat": "0.2",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 730,
        "y": 980,
        "wires": [
            [
                "1ad8f49f.933d5b"
            ]
        ]
    },
    {
        "id": "1ad8f49f.933d5b",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Programmable interval",
        "func": "if (flow.get('resettingCamera')) return null;\nif (flow.get('cameraInUse')) return null;\nif(flow.get('device').triggerMode.value  == 0)\n{\n    if(flow.get('device').manualTrigger.value  == 1) return msg;\n}\nif(flow.get('device').triggerMode.value  == 1)\n{\n    var now = new Date().getTime();\n    if ((now - flow.get('lastTriggerTime')) > flow.get('device').imageDelay.value) \n    {\n        flow.set('lastTriggerTime',now);\n        return msg;\n    }\n}\n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 980,
        "wires": [
            [
                "7954081a.e8ed48"
            ]
        ]
    },
    {
        "id": "f09c19da.79ebb8",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "rate",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 170,
        "y": 1200,
        "wires": [
            [
                "36e889a9.df4dd6"
            ]
        ]
    },
    {
        "id": "4983dfa0.ae56b",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Reset Delay",
        "func": "return [{topic:\"reset\",reset:1},{topic:\"setCameraAvailable\",payload:1}];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 890,
        "y": 1200,
        "wires": [
            [
                "615d489b.7be438",
                "10f2361.86b23ca"
            ],
            [
                "9076c61b.db6f08",
                "10f2361.86b23ca"
            ]
        ]
    },
    {
        "id": "e62483a8.9b54b",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set Camera Available",
        "func": "flow.set('cameraInUse',false);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "x": 1300,
        "y": 1200,
        "wires": []
    },
    {
        "id": "9076c61b.db6f08",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "200",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1090,
        "y": 1200,
        "wires": [
            [
                "e62483a8.9b54b"
            ]
        ]
    },
    {
        "id": "a9ba07c0.2737f8",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "Reset Out",
        "links": [
            "249ebb41.0fd534"
        ],
        "x": 715,
        "y": 1380,
        "wires": []
    },
    {
        "id": "1680cc5f.81a194",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Re Init system",
        "func": "node.warn(msg);\nnode.warn(\"Reinitializing system\");\nflow.set('resettingCamera',true);\nreturn {topic:'init',payload:1};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1280,
        "y": 1140,
        "wires": [
            [
                "69c47bae.941b24"
            ]
        ]
    },
    {
        "id": "69c47bae.941b24",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "Re init system out",
        "links": [
            "249ebb41.0fd534"
        ],
        "x": 1395,
        "y": 1140,
        "wires": []
    },
    {
        "id": "f4d3d03d.e16e2",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set 1",
        "func": "return {topic:'turnOn', payload:1};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 510,
        "y": 1260,
        "wires": [
            [
                "a99063ba.90a37"
            ]
        ]
    },
    {
        "id": "a99063ba.90a37",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": " Take Image start out",
        "links": [
            "cb51837e.00842"
        ],
        "x": 595,
        "y": 1260,
        "wires": []
    },
    {
        "id": "10f2361.86b23ca",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set 0",
        "func": "return {topic:'turnOn', payload:0};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1050,
        "y": 1240,
        "wires": [
            [
                "41fe535d.8de9ac"
            ]
        ]
    },
    {
        "id": "41fe535d.8de9ac",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "Take Image complete out",
        "links": [
            "cb51837e.00842"
        ],
        "x": 1135,
        "y": 1240,
        "wires": []
    },
    {
        "id": "f04f5c6b.15358",
        "type": "status",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "scope": [
            "e7605d.fa67cfa"
        ],
        "x": 100,
        "y": 1120,
        "wires": [
            [
                "26385995.f6c7e6"
            ]
        ]
    },
    {
        "id": "3a4fbc63.f80944",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set manual trigger",
        "func": "flow.get('device').triggerMode.value  = 0;\nflow.get('device').manualTrigger.value  = 1;\n",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 370,
        "y": 980,
        "wires": []
    },
    {
        "id": "6da1c402.089d6c",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "device to MQTT in",
        "links": [
            "1b5d4073.38d0d"
        ],
        "x": 635,
        "y": 420,
        "wires": [
            [
                "9115ea87.0ca208"
            ]
        ]
    },
    {
        "id": "1b5d4073.38d0d",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "image success out",
        "links": [
            "6da1c402.089d6c"
        ],
        "x": 715,
        "y": 1300,
        "wires": []
    },
    {
        "id": "2b97e6dd.6d7b5a",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "script.updateReadings",
        "field": "payload.script.updateReadings",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "// Update Readings Javascript\n        function updateDmaReadings()\n        {\n            $('#linkQualityId').text(device.linkQuality.value);\n            $('#signalLevelId').text(device.signalLevel.value);\n            if (!imageDelayChanged)$('#imageDelayInputId').val(device.imageDelay.value);\n\n            $('#triggerModeInputId').val(device.triggerMode.value);\n            if (device.triggerMode.value == 0)\n            {\n                $('#manualTrigger').show();\n            }\n            else\n            {\n                $('#manualTrigger').hide();\n            }\n            $('#transposeInputId').val(device.transpose.value);\n            $('#scaleModeInputId').val(device.scaleMode.value);\n            if (device.resMode.value == 1)\n            {\n                $('#chipResolutionId').text('80x60');\n            }\n            else\n            {\n                $('#chipResolutionId').text('160x120');\n            }\n            \n            $('#sensorName').text('Sensor ' + device.name);\n            $('#pixelMinId').text(device.pixelMin.value);\n            $('#pixelMaxId').text(device.pixelMax.value);\n            if (device.archiveData.value  == 1)\n            {\n                historyStripChart.addTracePoints(device.pixelMax.value, device.pixelMin.value);\n                $('#manualTriggerButton').text('Take Image');\n                $('#snapshotTimeStamp').text(new Date(device.timeStamp).toLocaleString('en-SE', { timeZone: 'Europe/Stockholm' }));\n                pgm = JSON.parse(JSON.stringify(device.imageData.value));\n                imageArray = pgm.imageArray;\n                if (device.transpose.value == 0)\n                {\n                    $('#flirCanvas').attr('width', '800');\n                }\n                else\n                {\n                    $('#flirCanvas').attr('width', '450');\n                }\n                plotImage();\n                var image1dArray = [];\n                var ipixel = 0;\n                var plow = (pgm.minval - 27315) / 100;\n                var phigh = (pgm.maxval - 27315) / 100;\n            }\n\n            var buttonColor = 'green';\n            var buttonTextColor = 'black';\n            var buttonText = \"Off\";\n            if (device.flipHorizontal.value > 0) \n            {\n                buttonColor = 'red';\n                buttonText = 'On';\n            }\n            $('#flipHorizontalId').css('color', buttonTextColor); \n            $('#flipHorizontalId').css('background-color', buttonColor); \n            $('#flipHorizontalId').text(buttonText); \n\n            buttonColor = 'green';\n            buttonTextColor = 'black';\n            buttonText = \"Off\";\n            if (device.flipVertical.value > 0) \n            {\n                buttonColor = 'red';\n                buttonText = 'On';\n            }\n            $('#flipVerticalId').css('color', buttonTextColor); \n            $('#flipVerticalId').css('background-color', buttonColor); \n            $('#flipVerticalId').text(buttonText); \n        }\n        function plotImage()\n        {\n            var rgb = [];\n            var plow = (pgm.minval - 27315) / 100;\n            var phigh = (pgm.maxval - 27315) / 100;\n            var pdelta = phigh - plow;\n            for (var ibox = 0; ibox < 9; ++ibox)\n            {\n                var intensity = ibox / 8.0;\n                var pbox = Math.round(((phigh - plow) * intensity + plow) * 10.0) / 10.0;\n                $('#box' + (ibox + 1).toString() + 'Label').text(pbox.toString());\n                if (enhancementLevel == -2) intensity = Math.pow(intensity, 1/3.0);\n                if (enhancementLevel == -1) intensity = Math.pow(intensity, 1/2.0);\n                if (enhancementLevel ==  0) intensity = Math.pow(intensity, 1);\n                if (enhancementLevel ==  1) intensity = Math.pow(intensity, 2.0);\n                if (enhancementLevel ==  2) intensity = Math.pow(intensity, 3.0);\n                if (colorScale)\n                {\n                    rgb = getRGB(intensity);\n                }\n                else\n                {\n                    rgb[0] = Math.floor(255 * intensity);\n                    rgb[1] = Math.floor(255 * intensity);\n                    rgb[2] = Math.floor(255 * intensity);\n                }\n                var style='width:88px;height:50px;background-color:' + 'rgb(' + rgb[0].toString() + ', ' + rgb[1].toString() + ', ' + rgb[2].toString() + ')';\n                $('#box' + (ibox + 1).toString()).attr('style',style);\n            }\n            var canvas = document.getElementById(\"flirCanvas\");\n            var canvasContext = canvas.getContext(\"2d\");\n            var tipPointer = document.getElementById(\"tipPointer\");\n            var tipPointerContext = tipPointer.getContext(\"2d\");\n            var tip = document.getElementById(\"tip\");\n            var tipContext = tip.getContext(\"2d\");\n            tipContext.font = \"30px Arial\";\n            tipContext.fillStyle = \"cyan\";\n            tipPointerContext.fillStyle = \"cyan\";\n            if (colorScale) tipContext.fillStyle = \"black\";\n            if (colorScale) tipPointerContext.fillStyle = \"black\";\n            tipContext.textAlign = \"left\";\n\n            var canvasWidth  = Number($('#flirCanvas').attr('width'));\n            var wrapperWidth = Number($('#wrapper').attr('width'));\n            var xOffsetKluge = Math.round((wrapperWidth - canvasWidth) / 2);\n            var canvasHeight = Number($('#flirCanvas').attr('height'));\n            var rectWidth  = Math.round(canvasWidth  / pgm.ncols);\n            var rectHeight = Math.round(canvasHeight / pgm.nrows);\n            canvas.onmousemove = function (e) \n            {\n                var icol = Math.floor(e.layerX / rectWidth);\n                if (icol < 0) icol = 0;\n                if (icol >= pgm.ncols) icol = pgm.ncols - 1;\n                var irow = Math.floor((canvasHeight - e.layerY) / rectHeight);\n                if (irow < 0) irow = 0;\n                if (irow >= pgm.nrows) irow = pgm.nrows - 1;\n                var temp = Math.floor(100.0 * (pdelta * imageArray[irow][icol] / 256.0 + plow)) / 100;\n\n                tipPointer.style.top = (e.layerY  - tipPointer.height / 2).toString()  + \"px\";\n                tipPointer.style.left = (xOffsetKluge + e.layerX - tipPointer.width / 2).toString() + \"px\";\n                tipPointerContext.clearRect(0, 0, tipPointer.width, tipPointer.height);\n                tipPointerContext.fillRect( 0, 0, tipPointer.width, tipPointer.height);\n\n                tip.style.top = (e.layerY - tip.height - tipPointer.height).toString()  + \"px\";\n                tip.style.left = (xOffsetKluge + e.layerX).toString() + \"px\";\n                tipContext.clearRect(0, 0, tip.width, tip.height);\n                tipContext.fillText(temp.toString() + ' C', 0, 30);\n            };\n\n            for (var irow = 0; irow < pgm.nrows; ++irow)\n            {\n                for (var icol = 0; icol < pgm.ncols; ++icol)\n                {\n                    var intensity = imageArray[irow][icol] / 256.0;\n                    if (enhancementLevel == -2) intensity = Math.pow(intensity, 1/3.0);\n                    if (enhancementLevel == -1) intensity = Math.pow(intensity, 1/2.0);\n                    if (enhancementLevel ==  0) intensity = Math.pow(intensity, 1);\n                    if (enhancementLevel ==  1) intensity = Math.pow(intensity, 2.0);\n                    if (enhancementLevel ==  2) intensity = Math.pow(intensity, 3.0);\n                    if (colorScale)\n                    {\n                        rgb = getRGB(intensity);\n                        rgb[0] = Math.floor(rgb[0]);\n                        rgb[1] = Math.floor(rgb[1]);\n                        rgb[2] = Math.floor(rgb[2]);\n                    }\n                    else\n                    {\n                        rgb[0] = Math.floor(255 * intensity);\n                        rgb[1] = Math.floor(255 * intensity);\n                        rgb[2] = Math.floor(255 * intensity);\n                    }\n                    canvasContext.fillStyle = 'rgb(' + rgb[0].toString() + ', ' + rgb[1].toString() + ', ' + rgb[2].toString() + ')';\n/*\n                    if (intensity > 0.98) \n                    {\n                        canvasContext.fillStyle='magenta';\n                        if (colorScale) canvasContext.fillStyle='white';\n                    }\n*/\n                    canvasContext.fillRect(icol * rectWidth, canvasHeight - rectHeight - irow * rectHeight, rectWidth, rectHeight);\n                }    \n            }\n        }\n        function mouseLeftCanvas()\n        {\n            var tip = document.getElementById(\"tip\");\n            var tipContext = tip.getContext(\"2d\");\n            tipContext.clearRect(0, 0, tip.width, tip.height);\n            var tipPointer = document.getElementById(\"tipPointer\");\n            var tipPointerContext = tipPointer.getContext(\"2d\");\n            tipPointerContext.clearRect(0, 0, tipPointer.width, tipPointer.height);\n        }\n        function getRGB(intensity)\n        {\n          var rgb = [0,0,0];\n          var rgbCoeff = [\n              [  48.6, 349.0,    5.72, -172.0],\n              [-164.0, 705.0, -667.0 ,  379.0],\n              [ 135.0, 332.0, -976.0,   536.0]];\n          var intensityStart = [0.0, 0.3176, 0.0];\n          var power = [1.0, 0.0, 0.0, 0.0];\n          for (var ii = 1; ii < 4; ++ii) power[ii] = power[ii - 1] * intensity;\n          for (var irgb = 0; irgb < 3; ++irgb)\n          {\n              if (intensity >= intensityStart[irgb])\n              {\n                  for (var ipow = 0; ipow < 4; ++ipow)\n                  {\n                      rgb[irgb] = rgb[irgb] + rgbCoeff[irgb][ipow] * power[ipow];\n                  }\n              }\n          }\n          return rgb;\n        }\n        function getRGBRainbow(intensity)\n        {\n          var rgb = [0,0,0];\n          if ( (0 <= intensity) && (intensity <= 0.25) )\n          {\n            rgb[0] = 0;\n            rgb[1] = Math.floor(255 * intensity * 4);    \n            rgb[2] = 255;\n          }\n          if ( (0.25 < intensity) && (intensity <= 0.50) )\n          {\n            rgb[0] = 0;\n            rgb[1] = 255;    \n            rgb[2] = Math.floor(255 * (0.50 - intensity) * 4);\n          }\n          if ( (0.50 < intensity) && (intensity <= 0.75) )\n          {\n            rgb[0] = Math.floor(255 * (intensity - 0.50) * 4);\n            rgb[1] = 255;    \n            rgb[2] = 0;\n          }\n          if ( (0.75 < intensity) && (intensity <= 1.0) )\n          {\n            rgb[0] = 255;\n            rgb[1] = Math.floor(255 * (1.0 - intensity) * 4);    \n            rgb[2] = 0;\n          }\n          return rgb;\n        }\n        function toggleColorScale()\n        {\n            colorScale = !colorScale;\n            if (colorScale)\n            {\n                $('#colorScaleButton').text('Color');\n            }\n            else\n            {\n                $('#colorScaleButton').text('Gray');\n            }\n            plotImage();\n        }\n        function toggleEnhancedScale(deltaEnhanced)\n        {\n            enhancementLevel = enhancementLevel + deltaEnhanced;\n            if (enhancementLevel >  2) enhancementLevel = 2;\n            if (enhancementLevel < -2) enhancementLevel = -2;\n            $('#enhancementLevel').text(enhancementLevel.toString());\n            plotImage();\n        }\n        function clearImage()\n        {\n            var canvas = document.getElementById(\"flirCanvas\");\n            var canvasContext = canvas.getContext(\"2d\");\n            var canvasWidth  = Number($('#flirCanvas').attr('width'));\n            var canvasHeight = Number($('#flirCanvas').attr('height'));\n            canvasContext.clearRect(0, 0, canvasWidth, canvasHeight);        \n            $('#snapshotTimeStamp').text('-');\n            for (var ibox = 0; ibox < 9; ++ibox)\n            {\n                var intensity = ibox / 8.0;\n                var pbox = 0.0;\n                $('#box' + (ibox + 1).toString() + 'Label').text(pbox.toString());\n            } \n            $('#pixelMaxBarPlot').hide();\n        }\n        function flipHorizontal()\n        {\n            if (device.flipHorizontal.value > 0)\n            {\n                device.flipHorizontal.value = 0;\n            }\n            else\n            {\n                device.flipHorizontal.value = 1;\n                \n            }\n            $('#flipHorizontalId').css('color', 'black'); \n            $('#flipHorizontalId').css('background-color', 'grey'); \n            $('#flipHorizontalId').text('?'); \n            sendSetting();\n        }\n        function flipVertical()\n        {\n            if (device.flipVertical.value > 0)\n            {\n                device.flipVertical.value = 0;\n            }\n            else\n            {\n                device.flipVertical.value = 1;\n                \n            }\n            $('#flipVerticalId').css('color', 'black'); \n            $('#flipVerticalId').css('background-color', 'grey'); \n            $('#flipVerticalId').text('?'); \n            sendSetting();\n        }\n        function imageDelayChange()\n        {\n            imageDelayChanged = true;\n            $('#imageDelayButtonId').show();\n        }\n        function imageDelay()\n        {\n            $('#imageDelayButtonId').hide();\n            if (isNaN($('#imageDelayInputId').val()))\n            {\n                imageDelayChanged = false;\n                return;\n            }\n            setScalarValue(Number($('#imageDelayInputId').val()), 'imageDelay');\n            imageDelayChanged = false;\n        }\n        function triggerMode()\n        {\n            if (isNaN($('#triggerModeInputId').val()))\n            {\n                 return;\n            }\n            setScalarValue(Number($('#triggerModeInputId').val()), 'triggerMode');\n        }\n        function scaleMode()\n        {\n            if (isNaN($('#scaleModeInputId').val()))\n            {\n                 return;\n            }\n            setScalarValue(Number($('#scaleModeInputId').val()), 'scaleMode');\n        }\n        function manualTrigger()\n        {\n            if (device.manualTrigger.value == 0)\n            {\n                setScalarValue(1, 'manualTrigger');\n                $('#manualTriggerButton').text('ABORT');\n            }\n            else\n            {\n                setScalarValue(0, 'manualTrigger');\n                $('#manualTriggerButton').text('Take Image');\n            }\n        }\n        function transpose()\n        {\n            if (isNaN($('#transposeInputId').val()))\n            {\n                 return;\n            }\n            setScalarValue(Number($('#transposeInputId').val()), 'transpose');\n        }\n",
        "output": "str",
        "x": 660,
        "y": 340,
        "wires": [
            [
                "1ee8ce74.b06fc2"
            ]
        ]
    },
    {
        "id": "fd846092.bca31",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.spectrogram",
        "field": "payload.html.spectrogram",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- Dashboard HTML -->\n                <div class='card'>\n                    <p class='card-title'>Temperature</p>\n                    <div class='card-body' align=\"center\">\n                        <div class='row' style='padding-bottom: 25px;'>\n                            <div class=\"container-fluid \" align=\"center\">\n                                <table width='800px'>\n                                    <tr>\n                                        <td align=\"center\">\n                                            <div id=\"wrapper\" width=\"800\" height=\"600\" style=\"position:relative;\"  onmouseleave=\"mouseLeftCanvas()\">\n                                                <canvas id=\"flirCanvas\" width=\"800\" height=\"600\" style=\"border:1px solid #000000;\"></canvas>\n                                                <canvas id=\"tip\" width=125 height=30 style=\"position:absolute;\"></canvas>\n                                                <canvas id=\"tipPointer\" width=10 height=10 style=\"position:absolute;\"></canvas>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </div>\n                            <div class=\"container-fluid \" align=\"center\" style='padding-top: 0px;'>\n                                <table  width='792'>\n                                    <tr>\n                                        <td width=\"88px\">\n                                            <div id='box1' style=\"width:88px;height:50px;background-color:#0000ff\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box2' style=\"width:88px;height:50px;background-color:#0088ff\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box3' style=\"width:88px;height:50px;background-color:#00ffff\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box4' style=\"width:88px;height:50px;background-color:#00ff88\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box5' style=\"width:88px;height:50px;background-color:#00ff00\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box6' style=\"width:88px;height:50px;background-color:#88ff00\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box7' style=\"width:88px;height:50px;background-color:#ffff00\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box8' style=\"width:88px;height:50px;background-color:#ff8800\"></div>\n                                        </td>\n                                        <td width=\"88px\">\n                                            <div id='box9' style=\"width:88px;height:50px;background-color:#ff0000\"></div>\n                                        </td>\n                                    </tr>\n                                    <tr>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box1Label'>1</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box2Label'>2</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box3Label'>3</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box4Label'>4</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box5Label'>5</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box6Label'>6</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box7Label'>7</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box8Label'>8</span>\n                                        </td>\n                                        <td align='center' width=\"88px\">\n                                            <span style='font-size: 200%;' id='box9Label'>9</span>\n                                        </td>\n                                    </tr>\n                                </table>\n                                <div class='row' style='padding-bottom: 15px;' id='manualTrigger'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                           <tr>\n                                                <td width='20%' align='left'> </td>\n                                                <td width='60%' align='center'>\n                                                    <button class='btn btn-block card-button big-text' id=\"manualTriggerButton\" onclick=\"manualTrigger()\" >Take Image</button>\n                                                </td>\n                                                <td width='20%' align='left'> </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                           <tr>\n                                                <td width='40%' align='left'>\n                                                    <span  class='card-text' id='sensorName'>Sensor xx</span>\n                                                </td>\n                                                <td width='60%' align='right'>\n                                                    <span  class='card-text' id='snapshotTimeStamp'></span>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width=\"60%\" align='left'>\n                                                    <span  class='card-text'>Color Mode</span>\n                                                </td>\n                                                <td width=\"40%\">\n                                                    <button class='btn btn-block card-button big-text' id=\"colorScaleButton\" onclick=\"toggleColorScale()\" >Color</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width=\"60%\" align='left'>\n                                                    <span  class='card-text'>Enhancement Level</span>\n                                                </td>\n                                                <td width=\"14%\" >\n                                                    <button class='btn btn-block card-button big-text' onclick=\"toggleEnhancedScale(-1)\">-</button>\n                                                </td>\n                                                <td width=\"12%px\" align='center'>\n                                                    <span  class='card-text' id=\"enhancementLevel\" >0</span>\n                                                </td>\n                                                <td width=\"14%\">\n                                                    <button class='btn btn-block card-button big-text' onclick=\"toggleEnhancedScale(1)\">+</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                   </div>\n                </div>\n",
        "output": "str",
        "x": 970,
        "y": 260,
        "wires": [
            [
                "ac502b1d.d51818"
            ]
        ]
    },
    {
        "id": "ac502b1d.d51818",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.controls",
        "field": "payload.html.controls",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- Dashboard HTML -->\n                <div class='card'>\n                    <p class='card-title'>Controls</p>\n                    <div class='card-body' align=\"center\">\n                        <div class='row' style='padding-bottom: 25px;'>\n                            <div class=\"container-fluid \" align=\"center\" style='padding-top: 0px;'>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%' >\n                                                    <span class='card-text' >Flip Horizontal</span>\n                                                </td>\n                                                <td width='40%' align='center'>\n                                                    <button class='btn btn-block big-text' style='background-color:grey;color:black' id='flipHorizontalId' onclick=\"flipHorizontal()\" >?</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%' >\n                                                    <span class='card-text' >Flip Vertical</span>\n                                                </td>\n                                                <td width='40%' align='center'>\n                                                    <button class='btn btn-block big-text' style='background-color:grey;color:black' id='flipVerticalId' onclick=\"flipVertical()\" >?</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%'>\n                                                    <span class='card-text' >Image Delay (mS)</span>\n                                                </td>\n                                                <td width='20%'>\n                                                    <input id=\"imageDelayInputId\" type=\"text\" value=\"0\" class=\"big-text\"  size=\"8\" oninput=\"imageDelayChange()\"/>\n                                                </td>\n                                                <td width='20%'>\n                                                    <button class='btn btn-block card-button big-text' id=\"imageDelayButtonId\" onclick=\"imageDelay()\" >&#10003;</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%'>\n                                                    <span class='card-text' >Display Mode</span>\n                                                </td>\n                                                <td width='40%'>\n                                                    <select class=\"custom-select big-text\"  id=\"transposeInputId\" onchange=\"transpose()\">\n                                                        <option value=\"0\">Landscape</option>\n                                                        <option value=\"1\">Portrait</option>\n                                                    </select>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%'>\n                                                    <span class='card-text' >Trigger Mode</span>\n                                                </td>\n                                                <td width='40%'>\n                                                    <select class=\"custom-select big-text\"  id=\"triggerModeInputId\" onchange=\"triggerMode()\" >\n                                                        <option value=\"0\">Manual</option>\n                                                        <option value=\"1\">Periodic</option>\n                                                    </select>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%'>\n                                                    <span class='card-text' >Scale Mode</span>\n                                                </td>\n                                                <td width='40%'>\n                                                    <select class=\"custom-select big-text\"  id=\"scaleModeInputId\" onchange=\"scaleMode()\" >\n                                                        <option value=\"0\">Manual</option>\n                                                        <option value=\"1\">Auto</option>\n                                                    </select>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table width='100%'>\n                                            <tr>\n                                                <td width='60%' >\n                                                    <span class='card-text' >Min Pixel (C)</span>\n                                                </td>\n                                                <td width='20%' align='center'>\n                                                    <span class='card-text'  id='pixelMinId' >-100</span>\n                                                </td>\n                                                <td width='20%'>\n                                                    <button class='btn btn-block card-button big-text' onclick=\"editDevice('pixelMin')\" >Edit</button>\n                                                </td>\n                                            </tr>\n                                            <tr>\n                                                <td width='60%' >\n                                                    <span class='card-text' >Max Pixel (C)</span>\n                                                </td>\n                                                <td width='20%' align='center'>\n                                                    <span class='card-text'  id='pixelMaxId' >-100</span>\n                                                </td>\n                                                <td width='20%'>\n                                                    <button class='btn btn-block card-button big-text' onclick=\"editDevice('pixelMax')\" >Edit</button>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div class='row' style='padding-bottom: 15px;'>\n                                    <div class=\"container-fluid \" align=\"center\">\n                                        <table  width='100%'>\n                                            <tr>\n                                                <td width='60%'>\n                                                    <span class='card-text' >Chip Resolution</span>\n                                                </td>\n                                                <td width='20%'>\n                                                    <span class='card-text' id=\"chipResolutionId\" >80x60</span>\n                                                </td>\n                                                <td width='20%'>\n                                                </td>\n                                            </tr>\n                                        </table>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                   </div>\n                </div>\n                <div id=\"editDeviceDialog\" title=\"Edit Device\" class='card'>\n                    <p class='card-title' id='editDeviceDialogAttribute'>Attribute</p>\n                    <div class='card-body'>\n                        <table>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">Value</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"editValue\" type=\"text\" value=\"0\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">LoLo</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"loloAlarm\" type=\"text\" value=\"0\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">LOW</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"lowAlarm\" type=\"text\" value=\"0\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">HIGH</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"highAlarm\" type=\"text\" value=\"0\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">HiHi</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"hihiAlarm\" type=\"text\" value=\"0\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">Notify Name</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"notifyName\" type=\"text\" value=\"\" /></td>\n                            </tr>\n                            <tr>\n                                <td width=\"70%\" align=\"left\">  <span class=\"tableHeading tableText\">Notify Number</span></td>\n                                <td width=\"30%\" align=\"right\"><input class=\"form-control tableText\" id=\"notifyNumber\" type=\"text\" value=\"\" /></td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>",
        "output": "str",
        "x": 950,
        "y": 300,
        "wires": [
            [
                "63f10e7d.89f75"
            ]
        ]
    },
    {
        "id": "348d20cf.1d85b",
        "type": "subflow:8341090a.df9758",
        "z": "510a2b13.26f614",
        "name": "",
        "x": 990,
        "y": 180,
        "wires": []
    },
    {
        "id": "50658379.d83e4c",
        "type": "subflow:8341090a.df9758",
        "z": "510a2b13.26f614",
        "name": "",
        "x": 990,
        "y": 120,
        "wires": []
    },
    {
        "id": "4742fa12.8ee194",
        "type": "subflow:8341090a.df9758",
        "z": "510a2b13.26f614",
        "name": "",
        "x": 1150,
        "y": 500,
        "wires": []
    },
    {
        "id": "63f10e7d.89f75",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "html.history",
        "field": "payload.html.history",
        "fieldType": "msg",
        "format": "html",
        "syntax": "mustache",
        "template": "<!-- History HTML -->\n                <div class='card'>\n                    <p class='card-title'>History</p>\n                    <div class='card-body' align=\"center\">\n                        <div id=\"historyStripChart\" width=\"100%\" ></div>\n                    </div>\n                </div>\n",
        "output": "str",
        "x": 950,
        "y": 340,
        "wires": [
            [
                "28cd98f1.2a1518"
            ]
        ]
    },
    {
        "id": "51e6893d.3db098",
        "type": "template",
        "z": "510a2b13.26f614",
        "name": "script.stripChartWidget",
        "field": "payload.script.stripChartWidget",
        "fieldType": "msg",
        "format": "javascript",
        "syntax": "mustache",
        "template": "// StripChart Widget\n        class StripChart\n        {\n           constructor(plotConfig) \n            {\n                this.plotConfig = plotConfig;\n                this.plotStartTime = new Date().getTime();\n                this.layout =\n                {\n                    showlegend  : true,\n                    legend      : { x: 0, y: 1.15},\n                    height      : plotConfig.height,\n                    width       : plotConfig.width,\n                    xaxis       :\n                    {\n//                        title: 'Seconds since ' + new Date(this.plotStartTime).toLocaleString(),\n                        type: 'date'\n                    },\n                    yaxis:\n                    {\n                        title           : plotConfig.trace1Title,\n                        titlefont       : {color: plotConfig.trace1Color},\n                        tickfont        : {color:plotConfig.trace1Color},\n                        gridcolor       : plotConfig.trace1GridColor,\n                        zerolinecolor   : plotConfig.trace1GridColor,\n                        linecolor       : plotConfig.trace1GridColor,\n//                        range: [0, 2]\n        \n                    },\n                    margin: \n                        {\n                            t: 30, //top margin\n        //                    l: 0, //left margin\n        //                    r: 0, //right margin\n        //                    b: 20 //bottom margin\n                        },\n                };\n                this.trace1 = \n                {\n                    x: [],\n                    y: [],\n                    name: 'Max Temp',\n                    yaxis: 'y1',\n                    type: 'scatter',\n                    mode: 'markers',\n                    marker: {\n                        color: 'red',\n                        size: 10,\n                        symbol: 'circle'\n                    }\n                };\n                this.trace2 = \n                {\n                    x: [],\n                    y: [],\n                    name: 'Min Temp',\n                    yaxis: 'y1',\n                    type: 'scatter',\n                    mode: 'markers',\n                    marker: {\n                        color: 'green',\n                        size: 10,\n                        symbol: 'square'\n                    }\n                };\n            }\n            addTracePoints(trace1Pt, trace2Pt)\n            {\n                var now = new Date().getTime();\n                var plotBeginning = now - this.plotConfig.plotLength;\n                var removeDone = false;\n                while(!removeDone)\n                {\n                    if (this.trace1.x[0] < plotBeginning)\n                    {\n                        this.trace1.x.shift();\n                        this.trace1.y.shift();\n                    }\n                    else\n                    {\n                        removeDone = true;\n                    }\n                }\n                removeDone = false;\n                while(!removeDone)\n                {\n                    if (this.trace2.x[0] < plotBeginning)\n                    {\n                        this.trace2.x.shift();\n                        this.trace2.y.shift();\n                    }\n                    else\n                    {\n                        removeDone = true;\n                    }\n                }\n\n                this.trace1.x.push(now);\n                this.trace1.y.push(trace1Pt);\n                this.trace2.x.push(now);\n                this.trace2.y.push(trace2Pt);\n                Plotly.newPlot(this.plotConfig.htmlId, [this.trace1, this.trace2], this.layout);\n            }\n        }\n",
        "output": "str",
        "x": 660,
        "y": 260,
        "wires": [
            [
                "c98976c.3996888"
            ]
        ]
    },
    {
        "id": "2e244da9.636962",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Turn off Archive data",
        "func": "flow.get('device').archiveData.value = 0;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 800,
        "y": 380,
        "wires": [
            [
                "9115ea87.0ca208"
            ]
        ]
    },
    {
        "id": "b5cdafd1.72fb7",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Load image",
        "data": "payload",
        "dataType": "msg",
        "ret": "b64",
        "parameter1": "",
        "parameter1Type": "",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 370,
        "y": 100,
        "wires": [
            [
                "a988546e.ff46e8",
                "bf701a9b.4b0058"
            ]
        ]
    },
    {
        "id": "a988546e.ff46e8",
        "type": "change",
        "z": "3d014934.7e38a6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "image",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 100,
        "wires": [
            [
                "4d72db6a.363b94"
            ]
        ]
    },
    {
        "id": "b2de5e8f.c0c43",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Load an image and store in flow.image",
        "info": "",
        "x": 230,
        "y": 60,
        "wires": []
    },
    {
        "id": "f07d7143.05af6",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "Base64 Picard",
        "props": [
            {
                "p": "payload",
                "v": "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAFAANQMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP7kfj18dfBP7O/w71H4ieOJbqSzt54NN0jR9Njjm1jxHrt4szWGiaTDNJDC11cJb3FxLLPNDbWllbXV7cypBbua8zN82wmTYGtjsZKSp00kowSlUqzldRp04tx5pN+aSWrZ3Zbl+IzTGUsFho3qVXrJ3UIQTXNOTs7KKd+72Px38Uft8/tSfEi5kuPBj+F/g5oLkmxtdK0Oy8ZeJUhYkr/aWteLrS70S5mC7Tix8J6eqkMrGYYNfkuJ8Qs4xEpLBUcPgqTvyKUfb1mnrFynNKCklo1CLje77H6RhuCcsoxtiqtbF1LrmaapUtOkFFe0cW9buUZbaLU8p1D4r/tTa05m1D9o/wCKQdxkjS7nRPDsW49dsPh3RdLt0GegjiRFGQqgHFeVLiziSV/+FOtFN3tCGHgl5JRprT8j1Y8M5FH/AJl1GXnOVWT+91NzMTxv+0oh3R/tI/GsHtu8Y3dwvH+xPHJGfoUx2INT/rVxJ/0M8R16UevpBFvhzI5aPLcP8vaL/wBvubdh8bv2uvDci3Gl/tH+PbkxkMbfxBpPgbxJbTKCMxSprnhO+kKsOC0cscwHKTI4DDaHF/EcGn9e5le7jOjQlGS7Ncm3pZ9mYT4VyKcXH6jGF1ZOFWtFrzX7y179015H1h8B/wDgo94rsvF2g+Af2jtG0FNO8QXtvpGnfFLwxbz6RBp+oXMiwWf/AAmOgXFzeWsdldTyrHca9o1zZ2unExvPoi2Rub6z+syDj+eIxVDAZvQpwlXkqdPGYeLpwU27JVqN5KMZOyU6bsnrKKV2vms54Lhh8LVxmV1Ks40IudTC1nzz9mlecqVXRycVeXLJXcdI3a1/Y0EEAjkEZB9jX6lvqj89Pwz/AOCrXiS/1T4sfBT4drPKdM03wzqPjCawR2+zzX2uazcaPBd3EIwks1tbeHLmG0eQMYEvLxYiouZt35J4n4ibjlmFjJeylUlWlG2rmpRjH8L29fI/R+AKcISx+LfxQjCmpbcsX7zalur7Po/U8F8BReFryweG01fStQvbbMN1bWN/a3Mtm8eFdLiOCV3hkV/ldJQpVs7gCMV8UsBVpUI1cRQrUeaKdN1aU4RaasuVySTutf8AgH188bSq1qkKNWnUdNyUlSqxk1Z2akottWejT/zt081nbxkqsakKfvdyM/Qf/WrmcY3ei37I1jUdlp97d/xV7kQgiJA2D8zRZdl9w/aeX4/8A0YLLTljkmvvKihjQu8kjLGiRqCZHdmwEVRklmIVcZJ7jajRVWahy35r2UVq2trJat9LLXXzMZVHDVt8qV227Jer2R8n/GWXwzrFjqLeG9a0jWf7NdGu102/tr17QsSyib7NLIELeW6qT1KMASUYDDNMFjMH7CrUw2IoxdWPsZ1ac6XO4yT91uKbSunZbo6MDjMPi4VKdGtTrNR5a0KdRVHCM04Wkk20pP3bvro7M/pI/Za8V3njb9nP4LeJdSuZr3VL/wCHXhmLVb24dpLi91TTdOi0rUb24kclpJ7u9sZ7iZ2OWkkZj1r+iMqxEq+W4CtUfvVcHh5t2fvSdKPM79fevc/C8dTjRxuLpRSiqeIqxUf5YqpKyfyP5wP2x/itqUf7Q3x68afE/wASXi+G/hVqnxHiN9fNKYfC3w58C3mvX4Szht0Dw2Gn6PBdaoRbRGWeeW5ux51zctJJ+JcS4jH5jn9XB8zqTp5rVwuEhJKSjGVSEKVKKlZRTlJXvpfmlpsfrvD2FwuCyhYiKShWy2jWxTu1JzSlKrVuv7qslpZ38kvwZ8Y/8FmfC3wg+Kfwhj+JP7Nfg+x+BnxT0rTfEPhvx14B+Jenaz8W/CHhW/vpLCz8Q+J9B8LaTBDY6xBFF9u1PwLbeJItTsIHdLTXNZmS3F/+gvhTNqWDqOnnuIq4uUXKeGrRjVwVSdv4cVVlVUW37sKiioq691Lb4x8R5XUxMObKKdLDQajHExqOGJjFPSrNwhTT096UZa6vmba1/p00bUrfVtNtL22mjura5tre4trqKXzorm2niWSCeObLefHNEyyJKWZpFYOWOTX5RUb5pKUeWcZyU1ZK04tqcbR00kmtG1ppofol07NNNOMWmrtNOKa312tuaSrjPHfj6f5496gD8tv+CqP7eHgr9hn4L6L4v17wIvxP8XeMfEMnh74d+A7vUJNL0G71OztFvNV8QeKboQXcY0Hw9bSWnmwRWF9fX+o6lpenWwsILy91nTPq+F8txOaYutTw2Ing6dGkqmIxFJR9tGM58kIU77Oo09U1ZJ72PA4gx+HwGGpVK9COKlUqOFGhUv7KU4xcnKXfkWtrX2Z8m/sp/t5Xn7QLeDvBfxP8JfCLwb8Qvib8Ktb+J3gX/hT3iZda0mbw5pGqw6drXhPxXoVwr6v4P8V2Cm31y0sru/1Oz1bSY7u8X+yJbO1h1bbjPh3E5XgfrdPH4nHYV4in7aGJknUpVXGcaE42tFxbcovkjF80o8ynoRwvneHzLFfVngsPg8UqcpU5YaPLGpTg4e0jLRNcqcWuZtPpZn9XH/BJvxR4p1n4SfELR9b1bVNU0Pwx4ysNP8MQX1xcXkOjQ3OjrdajpWmtMz/ZLFZTbXo06ApbwT3s1wkSSXkryfT8AYvEYvAY6FWpOVPC4mjRw6k5OMIfVqcpxhqrLnbk1rZs+X4vwtDDYzDOlFRnWo1qtZqy55PE1eWTtrpF8l3/ACbs8C/4Krfs4/D661jRPFk3h1ZdG+OemeMvhx8W7HzrhNO8QC/8OWelW2+JJFNpeaz4Zl16x1KW0eE3SWMF3tW9F1dT+J4gYGOX4nLs6wUfZ4mri71p+84zxFBUqlGq1e3Py07NJR5+W8tdT2eCsZLF0MwyrEz9pShhk6VNuzVGtKpSrU01yyUFKpFx1fLdpK2j/kY+HX/BuX4R074wW3iHxV8edV8WfBrTdVF7pnhe68PyWvjWTRxcCWHw3d6vBqo0eC5hgb7M/iuzs1WZla7g8I2E8kP2Pd+ItSeD5Y5eoY6UHH2ntr4eM2rKrGHJz6P3vZNtdPaNbxHgaEMUpTx7lhE1JUlQvUkl/wAu5TdS1pbSndvW6ir2X9Smm2tjpFhaWFnDBa2dpbw21vBbqEht4LeNYYIIol4jihjVYokUBVRQAAABX545OUpSk05yk5zaVryk3KUrdLybdj7Vx5UlZJJJJLZJJJL7gtL6aSS8FzbtbxJcFbN3e3bzofMnTcPInmZUMUcE/wDpCQzb7iSPZsiVjCb5mulv8htLlT63/wAz4e/b7/YX+G/7eHwltvh5401Gfw5rGhajNrPg3xfZWa6nLoeo3FuLW9hvNMN9pcmqaRqEX2aa8sbfV9Iujf6bpN5HqEa2TW1z7OS57iMixjr0aca1KtTVPEUZS5eeMZOUHGSjJxlFtrrF32urnm5plNLN8N7CtJ05U5OdGqld06ji1rG8VKMk7NN3tsfm/wDsY/8ABIvwL+wRrvir4p6r8RdT+LvxM1jQrrwl4cvW0FfDeheEPD+p3VrcanbaTpB1nXrvUNc1d7C1gn1ma8tRb2Bn0yz02IXV5d3fZxRxdiM9w9DA0cMsNhfrEKk4Oq6latVWlJO0YRUYSleMVfmkk5dLc3D3DtDJK0sbVxCxNdQlDm9l7OFKDs5OMueUnzcvvJpWV7H94H7O/wAHPDfwM+E/hXwN4e0qLTJ00+z1TxRIskk1xq3i+/sLP+39VvLiV3eWae6h8iFdwitLC2s7C1SKztLeGP8AYcny3D5Vl9DCYemqaUVUqtXbqV5xi6tSTbbblLu9ElFWSSX5dmeNrZjja2Jry525yjTva0KMZNUqcbJJRjG3q7ybbbbp/tH/AAF0L9or4Z33gHV9Qn0S/ivrTXvC3iO2gW7l8PeJtOjuIrHUWsnlt1vrSS2vL3TtSsftNs91p19dR293Z3f2e8t4zvJ6GeYCeBrylTvKNSlVjq6VaF/Z1LXXMldpxTTabV9TXKc0r5RjaeMoWk0nTqU20lUpTspwu1KzaXuys+WVnY/D7x7+zr+1t8GZ5rfUvhBrnxJ0K3ZltvFPwjktvGcF1Gp+Rm8LrLa+PLado9pljPhie0jm3RQ390qrM/47jeDOIcHJqGFjjKeqjUwk4z0WzdOXJUi2tbcrV7q9lc/UsHxPkWNScsZ9SqtNuhjF7PlfW1Zc1GUe0nOL7xWx8B+M/wBvb4N/DbxPqPgf4k+LrL4c+N9JmW31XwZ8Qwvgrxfpkz58uK+8NeJxpmtWjuASgmslDjlCwzXjvKM6p3U8sxsX7yd8NVeievwp7L/gXPao4rLK6TpZjgZ3trHGULNydkvju9e2tjA8Rf8ABR79nXwjNb2/ij4peEvDs93AtzaQ63q2m6XJc2zlglxCl9cW7SwOUcLNGrRsUcKzFTWVHAZpX5nQwGKq8rcZOnQqS5X1TdrJ6bXuno7M3rrB4ZJ18dg6V9lUxVCm37vNdc81dNLRq/TY+ovhb4m+LXx50Wz1/wCCfwX+KHxI8P6q5TTfEuk+H49O8J3rDbkQeLfEV7ovhoIoZGaR9VWNVZXZghBPfR4a4hruKhlWJjzS5U6sY0lfzdWcUl53t53POrZ5kNOMufNsJor2p1HXl8o0Yzbbtofo7+z1+wD8TtZ8V+HvHv7Rr6L4b0Pw/qNlrmnfDDRtTg8RaxqupWEsd1ZReMNasd/h+y020u4o5bjStDvPEI1eNVgn1Sxg8+G4+1yLgOtTxVDG5vOko0JQq08FSfteerCSnB1qrioqMJJSUIKTbWs1az+Ozvi/Dzw9TCZVGtN1lKnUxVWKpxhBrll7GnzOblJXXNPlsvsPp+y444r9SPzs+ef2p/2ofhB+x18EPGnx9+N/iH+wPA/gyyR2itkjutd8Sa3eP9n0Pwl4V0x5oDq/ibxDfGOx0uwWWKJWaW+1C5sdKsr+/teTG42hl+GqYrES5adNPbeUrXUYrrJ7fi9D08myfMM+zHDZVldB4jGYmajCC0UI7zq1JWfJTpxvKUnol5tH8Af7fn/BUb9tf9u2TxFF4y+PPin9kb9nLVWuovDHwE+COtXXh/xTrnh2VytunxN8YaTGnizxjd31vtGsWl9qHhnwNKArWPg6OVWuLr85xPHtdyfsMLhqNGWlP6xKrUrTTa961GcFBP8Albb7vRp/01k/0esulRi8yznMcXieVyrfUIYbBYOg1ulVxcMRVrNO6TjTipdlc/IPT/8Agn38HG02DxlofxM1rV7kv9qWCTULW0u4Lgbpi0qNpayOWfcG33ErMWbcG3Zrmlxvm3I5UY5fZRuv3WIula60lXSv/XVHqYTwI4MeKVPF1eImtE1LF4Hkn03hgIyUX5PVbO6uN0z9inwb8Vdd0jw9eeK9ftBPqmmaXbrqni22t9Ftrq9ex0S0uZZL7TrmPT7O2t4rG1L+alrp2nW0UMEMNnbrGnhVPEfP8uwONxLwlHFQw1KvjJYXBYCrVxeIdGM5+zwuFw+IpfWMVVV40aT9+rOSpqXPJX+izTwB8NsPReK5+IqKpUeecaWPp1XKMKfNOV8Rg680kou0YSSvZRirK31lofwcl/4JufHKa3/Zw/a4+Ivw1+IyW1nqFn8QPgx8Rbq88Ka5ZK4a1s/GehWrXHh/xBpxlWSK88NeKNF8Q2BAS4l0u6spbe4fpw/iRjsa8VUwjw1ahhMU8NHFPL506GM5KFCrKvgKzquOJwkJVnh3WptxWKw+Jw75alCpFfNZJ4LcGZ/gKeKpYTiTBTqOrCpRxOYUIYuhyVJwi+StgZRfNBRqqLS5ozVpe9c/r+/4JSf8FuNS+PHjHw7+yx+2dL4W0b45a8sVh8K/jL4Zht9I8B/Gy9hiAHh7WtOjkXTvCfxOvY0NxYwaYtr4Y8XXf2jTNH0vw1q/9i6Drn3PDvF1LNqiwmLpww2NavT5HJ0Ky6KLnJuE93yPTTQ/M/EjwYxfB2DlnWTYnE5rk1J8uNWKpQpY/L3dr2lanSShUw3w3rQUXByvOHK7r+lCvtT8NP4hf+DgT4t/Gf48ftg6d8Frbw34r0v9nz9l7S/D81rq8+mXy+DPEvxj8faDa+INY8aXmpoqaZdweDfC2oad4U0xbpzc6HqSeK3tpYh4h+f8n46zOdXFwy+nNeywqhKrGMr3rzgqnvLb3ISjGz6ttaXP6r8CcoyfBZXiM8xOKwbzXMKlWlSoTqxhiqOAoNxUKUJWbeLqxlOoot81OnRW6aXjn/BKb/gjDp//AAUN8K/EP9pj4+674j0r4HQzeMfA3wW8J6Vqeo6Xq3xM8caPYXOj3PxC13xLHO+oWvgXwb4qzbWWk6dOLnxR4v0fVbXU7iw8NaFPo/ipcKcLUMww9XMsapzjUjWo4ak22k7Wde/VJ/BFab6327PFrxYx2QZjh+G+H506WIwssNi80xLpxnyQdSNeGCpppJudC31ibXNyT5YvVn87uk6lrWgNe6HeyT2l5pV1dabqFrIWjaG6sppLe5jkXoGSWMqR6jrjr8TjaNTDYmvhqicalOpUp8jum+VtJpK3NffZrbc/echzLDZrl+CzaEo+yxlKniKU3JRtRqRjNK8r6JSs77Wd9bmVN8V/DGlXx0+58XaNa6jMpPkPqdqkiAf89SHxFk4KrMULkfIGIJrXD5LnFam8RRy3GVKKV1UjRnZ2e8U0pys09YRlqhZjxtwZhcXSy3F8TZJTxtS8Vh5Y/DynDR+5U5ZyjSbWqVRxdraWZ+83/BGn/glj8Hf+Cnvwx/a58SfEbxn4j8MeJfAlz8OPC/wU8ceCtYW5fwb4u1Wx8Ya14h1bXvDLXC6T4t0G9t7fwvptxoupG2lnsG1n+xdX0HVxa6vZ/X8McM0cxwmYSzGhXpSnKNLDSnGcJQm1KpVqxU0nJczimvh1a0ufh3ir4o4vhnO+HI8NYzC4qhGFfGZhTjOlXo4qCnGhRoyq0ryp2iqlSLU/jUJSjJNI+NPFP7IX7Rfw4+LHxH/Zn13wp4kT44fALxlZ2KeIfBNn4guLRDBBZa94C+I3hnxFZ28S6PpeoacdA8RaBqMo0q+istWhnv4bbWra7ii+VzDA18ox9TDytGthJwnTqR05lpKnUSTXLpaSSb/A/Tsu4yyDiDh6hmuLxVCOW5vhJxxGGxVWlKUKsfcxmErUpPnnL2kZ048tKanGKmlGLsf6En/BPX45fEH9oD9kj4R+OPjHpUGg/Gmz0IeEvjBpEN3pd0sXj/ws50vU9V/4k091ptpH4usotN8bWum2txKml2fiS209jvtmFftmQ5pDNssw+Kveqo+yxCWvLXpqPtE7bKV1NXS0kvU/hXizK8Jk+f5lgsvquvlscROpl1ZxlH2mCqycqPxat01elKTs5SpuVldH5eeLvhH8aPD/AMUviWvivwD4/vtS8V/FDxVr8Ot6H4M13xRpHifR9Vv76/01tF1nRtM1bTIzc288bDSbia31LTraM2lxaWZjcR/kue5HnssyxVSODxNaVfGVZwq0qVTEQqU5zvB89KE4xtF8lpcjhy2koxVz7PKM1yqGX4aKxdGk6GGoU5051PZSp1INt+7Nxb1tJTV1K6afb4//AOCuP/BRn4lf8Ezv+Ca/wu+BHwR8N6z4J/aV/af1n4x+GPhl5Oh3Ph/xH8OPhfpmv3XiH4j/ABHttCFpZ6tpfjAf8Jtpuj+FZLuxsdQhvdZvfG3nyX2gKl9+n8K08Zh8lwlDGUqlCrTniI+zqpRnCn7afs00m2nyr7W61u9z4jiKvQxeb4zE0KyxEKnsJe153VTnGjTjJKU91FxStrFW926sf52T+HPiJe6BoN3eN4u1HVfHfiGPSvBfh6GXVdSvvGV3e3Islg0PSoUury9vTq00FhbxwwTPqd1era2m66hZJveWGw6n7RYeh7T+f2VNyfW7k43bvqm9V3PO/tPMvq8cL/aGO+qwjyQw31vEewjD+WNL2ns0vJRPX/i9+wf+2x+zp4d0/wAeftDfsm/tGfA/4f6hf2Ont49+JvwZ+IXhXwpa3epypHaWl7r+reH7XTrTULpnAtdOu7iC+unVo4IJHVgNr339DhstdFq7u+uu3Xbztvu9T7u/4Jj/APBRb9pD/gkf+0vF8RPhrbXfj79nv4lnS5fi38MYp7lvDvxG+HekyS+X4i095ZbgeGvHXhezv77UPD3iGdA2m3d3d6Vq63vh7UNU0+4l2XvW20Gld6JJt37dNtNl5LS+tr6n97nxH0j4pfEXxPD+0F4Z8D+LfiB8NPjiLbxv4B8ReEfDl34zbxL8MfFGlWmq/D7UEtvDJ1nV9Ca28Fy+HNmn6tp2lq8s1+0X2l4ruRfxriXKM+r5xisSsHiMXQxNZrDToKnW/c04pQg+V3pqEUo2ny3ak1d8zP1HI83ymjlWFwixVLDVKNG9WFa9G9WU5SrT5qllNzbctJPorLRH3f8AsB/Br4o/C7wz8QtT8faZL4Ws/HOsaDqvh7wlqMkD6xp/2Gyv4NQ1fVLazuLmDTp9YgudItl0+aUalbjRyNQgt3aOIfW8F5RmGVYbG/XrYf61XpVqWGlJSqUuWm41J1OWo1F1Hy2j0UPkvmeKczwOYV8IsI/bfVqE6dXEK6jUlOo5qELxi3Gn72tvtaNrU/Q2vuj5Q/zlP+Ds/wCKupav/wAFQvgL4E0XULqKP4Sfsk6fqWIJmiNj4h8c+NPijqGsSwlGBja48O6V4XWV+C3koCdqcTFt3vb8RtWt5q5+QH/BGX4haP4a/wCCt3/BNTU/G1nD4l0lfjRoXgvTtN1SFL+Cy8QfEK01vwH4L1OOKVZVjuvDvjHxTofiDTrkASWOo6Xa3kRikt43WhH99n/Bzj8bNL+Df/BHn9orTr3T7bUtR+NWs/Dj4LeHoby3FzaQanr/AIvsPFWoX8kZVglxp/hbwX4ivNKuMo1rrMOnXKMXiVWmabWncD/Lu07UfEd5oOi2iT3klpa+FNfggiEjLEtsVk+34O5RtMZ/eoeGQKpU4FUB/rf/APBELxjd+Of+CSv7Aut3ryyTWf7O3g7wijTFjIbT4ffbPAVhywBKfYfDVuIm5DxhWVmUhiAfqhQB86/tc+OfjP8ADT9mH48+Pf2c/h5J8WPjz4W+F3i/VfhB8O444518U/EOHSbhfCtjc2sl/pjX1hFq7215qOnW1/bahqNhbXNjprnULi2RgD/K5/aB/wCCf/8AwXI/bC+NurfFf4+/sz/tufEj4zeJNAurzUfFPiD4IeONKsLKNdau7K28F6ZrU9jpPhTRPD1qt7NNpOiaNNZ6ZpenXUv9n6JHpazzpKVr63v5Bc/ZH/gj3/wbRf8ABRf4eftY/s4/ta/tNXvgX9nbwp8DPin4H+KqeBdZ8Tab8Qvip4qj8Ja5Y69H4cg0b4e6hf8AhLw7Y+ILazfSr6/1rx1FqugJfNJP4O1WSGfTWoD+sn/gtX/wTM8Sf8FWf2PbD9nLwh8YLP4M+JvDXxZ8MfFzRdb1jQr7X/DXiG88N+GfG3hgeFPElvpmo2GpWGmXsXjSXU49Xso9UmsNQ0ixLaPfxSSLGAfwcfGH/g1S/wCCwHw41a20zQfBnw5+OPhGC5aKbxF8G/jH4cZbLT53Rbi+Hhf4v33we8QXUphw0+maTp9/NIyCK3NwoErAH7xf8G7n7GX/AAW//Yi+OnhnwX8ffBfi/wAM/sIeJfA/iyDx14D+JvxK+Geq2Xw28cQJqlz4R1X4XeEtE+IPjHxZZave6lp2mQa6+m6ToPhXVdE8WX8mspd634f0u4tQD+1ugD//2Q==",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "data:image/jpeg;base64,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",
        "payloadType": "str",
        "x": 180,
        "y": 100,
        "wires": [
            [
                "b5cdafd1.72fb7"
            ]
        ]
    },
    {
        "id": "bf701a9b.4b0058",
        "type": "debug",
        "z": "3d014934.7e38a6",
        "name": "Look in the available properties in the debug side bar",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 700,
        "y": 60,
        "wires": []
    },
    {
        "id": "4d72db6a.363b94",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 910,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "c529b2fc.8eb0d",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "base64",
        "props": [
            {
                "p": "payload",
                "v": "data:image/jpeg;base64,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",
                "vt": "str"
            },
            {
                "p": "topic",
                "v": "",
                "vt": "string"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "data:image/jpeg;base64,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",
        "payloadType": "str",
        "x": 150,
        "y": 240,
        "wires": [
            [
                "b4b8f84a.7e57a8",
                "72a6711e.51d3f"
            ]
        ]
    },
    {
        "id": "b4b8f84a.7e57a8",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Top line",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "FONT_SANS_16_WHITE",
        "parameter1Type": "jimpFont",
        "parameter2": "0",
        "parameter2Type": "num",
        "parameter3": "0",
        "parameter3Type": "num",
        "parameter4": "Resistance to Node-RED",
        "parameter4Type": "str",
        "parameter5": "HORIZONTAL_ALIGN_CENTER",
        "parameter5Type": "AlignX",
        "parameter6": "VERTICAL_ALIGN_TOP",
        "parameter6Type": "AlignY",
        "parameter7": "",
        "parameter7Type": "auto",
        "parameter8": "",
        "parameter8Type": "auto",
        "parameterCount": 8,
        "jimpFunction": "print2",
        "selectedJimpFunction": {
            "name": "print aligned",
            "fn": "print",
            "description": "Print text to the image",
            "parameters": [
                {
                    "name": "font|str",
                    "type": "jimpFont",
                    "required": true,
                    "hint": "font to print. NOTE: This can be one of the presets or the path to a fon file"
                },
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "x coordinate to print text"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "y coordinate to print text"
                },
                {
                    "name": "text",
                    "group": "options",
                    "type": "str",
                    "required": true,
                    "hint": "text to print"
                },
                {
                    "name": "alignmentX",
                    "group": "options",
                    "type": "AlignX",
                    "required": false,
                    "hint": "X Alignment"
                },
                {
                    "name": "alignmentY",
                    "group": "options",
                    "type": "AlignY",
                    "required": false,
                    "hint": "Y Alignment"
                },
                {
                    "name": "maxWidth",
                    "type": "auto|num",
                    "required": false,
                    "hint": "wrap text at maxWidth"
                },
                {
                    "name": "maxHeight",
                    "type": "auto|num",
                    "required": false,
                    "hint": ""
                }
            ]
        },
        "x": 280,
        "y": 240,
        "wires": [
            [
                "89489343.0b939"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "29e5dcb1.bf77e4",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": 160,
        "data": "payload",
        "dataType": "msg",
        "x": 830,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "38f08b84.83ddd4",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Bottom Line",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "FONT_SANS_16_WHITE",
        "parameter1Type": "jimpFont",
        "parameter2": "0",
        "parameter2Type": "num",
        "parameter3": "0",
        "parameter3Type": "num",
        "parameter4": "is futile",
        "parameter4Type": "str",
        "parameter5": "HORIZONTAL_ALIGN_CENTER",
        "parameter5Type": "AlignX",
        "parameter6": "VERTICAL_ALIGN_BOTTOM",
        "parameter6Type": "AlignY",
        "parameter7": "",
        "parameter7Type": "auto",
        "parameter8": "",
        "parameter8Type": "auto",
        "parameterCount": 8,
        "jimpFunction": "print2",
        "selectedJimpFunction": {
            "name": "print aligned",
            "fn": "print",
            "description": "Print text to the image",
            "parameters": [
                {
                    "name": "font|str",
                    "type": "jimpFont",
                    "required": true,
                    "hint": "font to print. NOTE: This can be one of the presets or the path to a fon file"
                },
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "x coordinate to print text"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "y coordinate to print text"
                },
                {
                    "name": "text",
                    "group": "options",
                    "type": "str",
                    "required": true,
                    "hint": "text to print"
                },
                {
                    "name": "alignmentX",
                    "group": "options",
                    "type": "AlignX",
                    "required": false,
                    "hint": "X Alignment"
                },
                {
                    "name": "alignmentY",
                    "group": "options",
                    "type": "AlignY",
                    "required": false,
                    "hint": "Y Alignment"
                },
                {
                    "name": "maxWidth",
                    "type": "auto|num",
                    "required": false,
                    "hint": "wrap text at maxWidth"
                },
                {
                    "name": "maxHeight",
                    "type": "auto|num",
                    "required": false,
                    "hint": ""
                }
            ]
        },
        "x": 690,
        "y": 240,
        "wires": [
            [
                "29e5dcb1.bf77e4"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "89489343.0b939",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": 160,
        "data": "payload",
        "dataType": "msg",
        "x": 410,
        "y": 240,
        "wires": [
            [
                "885dd34f.7aa82"
            ]
        ]
    },
    {
        "id": "885dd34f.7aa82",
        "type": "delay",
        "z": "3d014934.7e38a6",
        "name": "",
        "pauseType": "delay",
        "timeout": "2",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 540,
        "y": 240,
        "wires": [
            [
                "38f08b84.83ddd4"
            ]
        ]
    },
    {
        "id": "72a6711e.51d3f",
        "type": "debug",
        "z": "3d014934.7e38a6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 300,
        "y": 340,
        "wires": []
    },
    {
        "id": "876b5ce6.0889f",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Set image size",
        "func": "var device = flow.get('device');\nif (device.triggerMode.value == 0) return null;\nreturn {topic:'setBackground',payload:\n    {\n        w: device.imageData.value.ncols, \n        h: device.imageData.value.nrows, \n        background:  '#000000FF'} \n    };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 820,
        "y": 1340,
        "wires": [
            [
                "db684ec0.adc74"
            ]
        ]
    },
    {
        "id": "db684ec0.adc74",
        "type": "jimp-image",
        "z": "4c1c8ca0.447d94",
        "name": "Create image background",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "sendPropertyType": "msg",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 1030,
        "y": 1340,
        "wires": [
            [
                "425e9c3d.78e1b4"
            ]
        ]
    },
    {
        "id": "425e9c3d.78e1b4",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Fill in image",
        "func": "var pgm = flow.get('device').imageData.value;\nfor (var irow = 0; irow < pgm.nrows; ++irow)\n{\n    for (var icol = 0; icol < pgm.ncols; ++icol)\n    {\n        var intensity = pgm.imageArray[irow][icol] / 256.0;\n        setPixel(irow, icol, getRGB(intensity));\n    }\n}\nvar fileName = flow.get('imageFileCounter').toString();\nwhile (fileName.length < 4) fileName = '0' + fileName;\nmsg['fileName'] = \"/home/pi/thermo-timelapse/t\" + fileName + \".jpg\";\nflow.set('imageFileCounter', flow.get('imageFileCounter') + 1);\nreturn msg;\nfunction setPixel(row, col, rgb)\n{\n    var ioffset = 4 * (col + (pgm.nrows - row - 1) * pgm.ncols)\n    msg.payload.bitmap.data[ioffset] = rgb[0];\n    msg.payload.bitmap.data[ioffset + 1] =  rgb[1];\n    msg.payload.bitmap.data[ioffset + 2] =  rgb[2];\n}\nfunction getRGB(intensity)\n{\n  var rgb = [0,0,0];\n  var rgbCoeff = [\n      [  48.6, 349.0,    5.72, -172.0],\n      [-164.0, 705.0, -667.0 ,  379.0],\n      [ 135.0, 332.0, -976.0,   536.0]];\n  var intensityStart = [0.0, 0.3176, 0.0];\n  var power = [1.0, 0.0, 0.0, 0.0];\n  for (var ii = 1; ii < 4; ++ii) power[ii] = power[ii - 1] * intensity;\n  for (var irgb = 0; irgb < 3; ++irgb)\n  {\n      if (intensity >= intensityStart[irgb])\n      {\n          for (var ipow = 0; ipow < 4; ++ipow)\n          {\n              rgb[irgb] = rgb[irgb] + rgbCoeff[irgb][ipow] * power[ipow];\n          }\n      }\n      if (rgb[irgb] < 0) rgb[irgb] = 0;\n      if (rgb[irgb] > 255) rgb[irgb] = 255;\n  }\n  return rgb;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 1230,
        "y": 1340,
        "wires": [
            [
                "a8f63632.34c3d8"
            ]
        ]
    },
    {
        "id": "527afcbb.2093b4",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "flow.image",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "image",
        "payloadType": "flow",
        "x": 280,
        "y": 620,
        "wires": [
            [
                "5e26c620.5e6918"
            ]
        ]
    },
    {
        "id": "5e26c620.5e6918",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Invert",
        "data": "payload",
        "dataType": "msg",
        "ret": "b64",
        "parameter1": "{\"name\":\"invert\"}",
        "parameter1Type": "json",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "invert",
        "selectedJimpFunction": {
            "name": "invert",
            "fn": "invert",
            "description": "invert the image colours",
            "parameters": []
        },
        "x": 410,
        "y": 620,
        "wires": [
            [
                "f01bb953.0836a8"
            ]
        ]
    },
    {
        "id": "fdeb03e3.7093f",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Rotate, posterize, brightness",
        "data": "payload",
        "dataType": "msg",
        "ret": "buf",
        "parameter1": "[{\"name\":\"rotate\",\"parameters\":[270]},{\"name\":\"posterize\",\"parameters\":[22]},{\"name\":\"brightness\",\"parameters\":[0.3]}]",
        "parameter1Type": "json",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "batch",
        "selectedJimpFunction": {
            "name": "batch",
            "fn": "batch",
            "description": "apply one or more functions",
            "parameters": [
                {
                    "name": "options",
                    "type": "json",
                    "required": true,
                    "hint": "an object or an array of objects containing {\"name\" : \"function_name\", \"parameters\" : [x,y,z]}.  Refer to info on side panel}"
                }
            ]
        },
        "x": 480,
        "y": 880,
        "wires": [
            [
                "12686c41.b5d294"
            ]
        ]
    },
    {
        "id": "67e00588.f3434c",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "sepia, blur, contrast -> buffer",
        "data": "payload",
        "dataType": "msg",
        "ret": "buf",
        "parameter1": "[{\"name\":\"sepia\"},{\"name\":\"blur\",\"parameters\":[2]},{\"name\":\"contrast\",\"parameters\":[0.2]}]",
        "parameter1Type": "json",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "batch",
        "selectedJimpFunction": {
            "name": "batch",
            "fn": "batch",
            "description": "apply one or more functions",
            "parameters": [
                {
                    "name": "options",
                    "type": "json",
                    "required": true,
                    "hint": "an object or an array of objects containing {\"name\" : \"function_name\", \"parameters\" : [x,y,z]}.  Refer to info on side panel}"
                }
            ]
        },
        "x": 780,
        "y": 880,
        "wires": [
            [
                "532b1144.e69ae"
            ]
        ]
    },
    {
        "id": "fd21f8ce.584578",
        "type": "file",
        "z": "3d014934.7e38a6",
        "name": "",
        "filename": "written.png",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "x": 1050,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "232f6b74.ba8764",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Load image",
        "data": "payload",
        "dataType": "msg",
        "ret": "b64",
        "parameter1": "",
        "parameter1Type": "",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 490,
        "y": 500,
        "wires": [
            [
                "1e38d581.4e198a",
                "d0c659d6.c8a6c8"
            ]
        ]
    },
    {
        "id": "1e38d581.4e198a",
        "type": "change",
        "z": "3d014934.7e38a6",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "image",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 500,
        "wires": [
            [
                "ad96f84f.a3d028"
            ]
        ]
    },
    {
        "id": "8b12176c.805c08",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 235,
        "y": 1100,
        "wires": [
            [
                "a231826e.93e2e"
            ]
        ],
        "l": false
    },
    {
        "id": "a231826e.93e2e",
        "type": "file in",
        "z": "3d014934.7e38a6",
        "name": "",
        "filename": "written.png",
        "format": "",
        "chunk": false,
        "sendError": false,
        "x": 350,
        "y": 1100,
        "wires": [
            [
                "53f02896.cbc9c8"
            ]
        ]
    },
    {
        "id": "2f5a620d.c46cfe",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Load an image and store in flow.image",
        "info": "",
        "x": 350,
        "y": 460,
        "wires": []
    },
    {
        "id": "9ae9f42f.69bbe8",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Crop",
        "data": "payload",
        "dataType": "msg",
        "ret": "buf",
        "parameter1": "10",
        "parameter1Type": "num",
        "parameter2": "10",
        "parameter2Type": "num",
        "parameter3": "40",
        "parameter3Type": "num",
        "parameter4": "40",
        "parameter4Type": "num",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 4,
        "jimpFunction": "crop",
        "selectedJimpFunction": {
            "name": "crop",
            "fn": "crop",
            "description": "crop to the given region",
            "parameters": [
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "the x coordinate to crop form"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "the y coordinate to crop form"
                },
                {
                    "name": "w",
                    "type": "num",
                    "required": true,
                    "hint": "the width of the crop region"
                },
                {
                    "name": "h",
                    "type": "num",
                    "required": true,
                    "hint": "the height of the crop region"
                }
            ]
        },
        "x": 590,
        "y": 620,
        "wires": [
            [
                "744941af.d0ba"
            ]
        ]
    },
    {
        "id": "ae5b7438.231658",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "flow.image",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "image",
        "payloadType": "flow",
        "x": 280,
        "y": 880,
        "wires": [
            [
                "fdeb03e3.7093f"
            ]
        ]
    },
    {
        "id": "f504478.b66beb8",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "re-load the written files (check they are valid)",
        "info": "",
        "x": 370,
        "y": 1060,
        "wires": []
    },
    {
        "id": "cc67f4.3cef881",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Write buffer to png file",
        "info": "",
        "x": 1240,
        "y": 960,
        "wires": []
    },
    {
        "id": "df5acd80.557f8",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Demonstrate chained batch operations, chained viewer and output to BMP,JPG,PNG files",
        "info": "",
        "x": 510,
        "y": 840,
        "wires": []
    },
    {
        "id": "5d8c4f04.d788c",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Demonstrate chained operations",
        "info": "",
        "x": 330,
        "y": 580,
        "wires": []
    },
    {
        "id": "5eccd3b8.d553ac",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "written.png",
        "data": "written.png",
        "dataType": "str",
        "ret": "buf",
        "parameter1": "",
        "parameter1Type": "",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 750,
        "y": 1100,
        "wires": [
            [
                "37b2a9a0.bb8596"
            ]
        ]
    },
    {
        "id": "a7729f48.bc91e",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "re-load files written by jimp Image node",
        "info": "",
        "x": 770,
        "y": 1060,
        "wires": []
    },
    {
        "id": "dd35f049.3a4aa",
        "type": "debug",
        "z": "3d014934.7e38a6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 1030,
        "y": 1000,
        "wires": []
    },
    {
        "id": "c0ee6b75.918458",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "",
        "data": "payload",
        "dataType": "msg",
        "ret": "buf",
        "parameter1": "true",
        "parameter1Type": "bool",
        "parameter2": "true",
        "parameter2Type": "bool",
        "parameter3": "0",
        "parameter3Type": "str",
        "parameter4": "RESIZE_NEAREST_NEIGHBOR",
        "parameter4Type": "Jimp",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 2,
        "jimpFunction": "flip",
        "selectedJimpFunction": {
            "name": "flip",
            "fn": "flip",
            "description": "flip the image horizontally or vertically",
            "parameters": [
                {
                    "name": "horz",
                    "type": "bool",
                    "required": true,
                    "hint": "if true the image will be flipped horizontally"
                },
                {
                    "name": "vert",
                    "type": "bool",
                    "required": true,
                    "hint": "if true the image will be flipped vertically"
                }
            ]
        },
        "x": 790,
        "y": 620,
        "wires": [
            [
                "8c020811.1563a8"
            ]
        ]
    },
    {
        "id": "fb6499cd.82b3b8",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "Base64 Picard",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "data:image/jpeg;base64,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",
        "payloadType": "str",
        "x": 300,
        "y": 500,
        "wires": [
            [
                "232f6b74.ba8764"
            ]
        ]
    },
    {
        "id": "d0c659d6.c8a6c8",
        "type": "debug",
        "z": "3d014934.7e38a6",
        "name": "Look in the available properties in the debug side bar",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 820,
        "y": 460,
        "wires": []
    },
    {
        "id": "c2fe5bd2.f61df8",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Promote Worf",
        "data": "picard",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "worf",
        "parameter1Type": "msg",
        "parameter2": "0",
        "parameter2Type": "num",
        "parameter3": "0",
        "parameter3Type": "num",
        "parameter4": "0",
        "parameter4Type": "num",
        "parameter5": "0",
        "parameter5Type": "num",
        "parameter6": "90",
        "parameter6Type": "num",
        "parameter7": "60",
        "parameter7Type": "num",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "captainWorf",
        "parameterCount": 7,
        "jimpFunction": "blit",
        "selectedJimpFunction": {
            "name": "blit",
            "fn": "blit",
            "description": "blit the image with another Jimp image at x, y, optionally cropped",
            "parameters": [
                {
                    "name": "src",
                    "type": "",
                    "required": true,
                    "hint": "the source image (a Jimp instance)",
                    "defaultType": "msg",
                    "defaultValue": "payload"
                },
                {
                    "name": "x",
                    "type": "num",
                    "required": true,
                    "hint": "the x position to blit the image"
                },
                {
                    "name": "y",
                    "type": "num",
                    "required": true,
                    "hint": "the y position to blit the image"
                },
                {
                    "name": "srcx",
                    "type": "num",
                    "required": false,
                    "hint": "the x position from which to crop the source image"
                },
                {
                    "name": "srcy",
                    "type": "num",
                    "required": false,
                    "hint": "the y position from which to crop the source image"
                },
                {
                    "name": "srcw",
                    "type": "num",
                    "required": false,
                    "hint": "the width to which to crop the source image"
                },
                {
                    "name": "srch",
                    "type": "num",
                    "required": false,
                    "hint": "the height to which to crop the source image"
                }
            ]
        },
        "x": 820,
        "y": 1300,
        "wires": [
            [
                "5ca17346.6ea04c"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "749fb2cd.dad40c",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 270,
        "y": 1300,
        "wires": [
            [
                "264a7f21.314fa"
            ]
        ]
    },
    {
        "id": "264a7f21.314fa",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Load Worf",
        "data": "data:image/jpeg;base64,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",
        "dataType": "str",
        "ret": "img",
        "parameter1": "90",
        "parameter1Type": "num",
        "parameter2": "120",
        "parameter2Type": "num",
        "parameter3": "RESIZE_BICUBIC",
        "parameter3Type": "resizeMode",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "worf",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 410,
        "y": 1300,
        "wires": [
            [
                "28dbd127.ad7f1e"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "532fbc04.a18154",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Load Picard",
        "data": "data:image/jpeg;base64,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",
        "dataType": "str",
        "ret": "img",
        "parameter1": "90",
        "parameter1Type": "num",
        "parameter2": "120",
        "parameter2Type": "num",
        "parameter3": "RESIZE_BICUBIC",
        "parameter3Type": "resizeMode",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "picard",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 610,
        "y": 1300,
        "wires": [
            [
                "d69f7d94.1575a"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "af9bb00.2d8d35",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Working with multiple images and demonstrating Blit function",
        "info": "",
        "x": 420,
        "y": 1260,
        "wires": []
    },
    {
        "id": "abec43e4.c8e7a",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 655,
        "y": 1100,
        "wires": [
            [
                "5eccd3b8.d553ac"
            ]
        ],
        "l": false
    },
    {
        "id": "6b4fa595.48c8ac",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "written.jpg",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "written.jpg",
        "parameter1Type": "str",
        "parameter2": "true",
        "parameter2Type": "bool",
        "parameter3": "0",
        "parameter3Type": "str",
        "parameter4": "RESIZE_NEAREST_NEIGHBOR",
        "parameter4Type": "Jimp",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "write",
        "selectedJimpFunction": {
            "name": "write",
            "fn": "write",
            "description": "Write to file. NOTE: You can specify an alternative file extension type to change the type. Currently support types are jpg, png, bmp.",
            "parameters": [
                {
                    "name": "filename",
                    "type": "str",
                    "required": true,
                    "hint": "Name of the file",
                    "defaultType": "str"
                }
            ]
        },
        "x": 1050,
        "y": 920,
        "wires": [
            []
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "116519a4.7bda16",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Convert + save as jpg",
        "info": "",
        "x": 1240,
        "y": 920,
        "wires": []
    },
    {
        "id": "6cd9382e.7a98d8",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "written.jpg",
        "data": "written.jpg",
        "dataType": "str",
        "ret": "buf",
        "parameter1": "",
        "parameter1Type": "",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 750,
        "y": 1140,
        "wires": [
            [
                "37b2a9a0.bb8596"
            ]
        ]
    },
    {
        "id": "79720c0a.22b474",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 655,
        "y": 1140,
        "wires": [
            [
                "6cd9382e.7a98d8"
            ]
        ],
        "l": false
    },
    {
        "id": "717eaeca.39a19",
        "type": "file in",
        "z": "3d014934.7e38a6",
        "name": "",
        "filename": "written.jpg",
        "format": "",
        "chunk": false,
        "sendError": false,
        "x": 350,
        "y": 1140,
        "wires": [
            [
                "53f02896.cbc9c8"
            ]
        ]
    },
    {
        "id": "7c9dc6e9.a62298",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 235,
        "y": 1140,
        "wires": [
            [
                "717eaeca.39a19"
            ]
        ],
        "l": false
    },
    {
        "id": "cdc61580.7d3078",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "written.bmp",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "written.bmp",
        "parameter1Type": "str",
        "parameter2": "true",
        "parameter2Type": "bool",
        "parameter3": "0",
        "parameter3Type": "str",
        "parameter4": "RESIZE_NEAREST_NEIGHBOR",
        "parameter4Type": "Jimp",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "write",
        "selectedJimpFunction": {
            "name": "write",
            "fn": "write",
            "description": "Write to file. NOTE: You can specify an alternative file extension type to change the type. Currently support types are jpg, png, bmp.",
            "parameters": [
                {
                    "name": "filename",
                    "type": "str",
                    "required": true,
                    "hint": "Name of the file",
                    "defaultType": "str"
                }
            ]
        },
        "x": 1050,
        "y": 880,
        "wires": [
            []
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "579d2fce.35ab4",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 655,
        "y": 1180,
        "wires": [
            [
                "d526d09f.2629"
            ]
        ],
        "l": false
    },
    {
        "id": "d526d09f.2629",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "written.bmp",
        "data": "written.bmp",
        "dataType": "str",
        "ret": "buf",
        "parameter1": "",
        "parameter1Type": "",
        "parameter2": "",
        "parameter2Type": "",
        "parameter3": "",
        "parameter3Type": "",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 0,
        "jimpFunction": "none",
        "selectedJimpFunction": {
            "name": "none",
            "fn": "none",
            "description": "Just loads the image.",
            "parameters": []
        },
        "x": 750,
        "y": 1180,
        "wires": [
            [
                "37b2a9a0.bb8596"
            ]
        ]
    },
    {
        "id": "2292902.230547",
        "type": "file in",
        "z": "3d014934.7e38a6",
        "name": "",
        "filename": "written.bmp",
        "format": "",
        "chunk": false,
        "sendError": false,
        "x": 350,
        "y": 1180,
        "wires": [
            [
                "53f02896.cbc9c8"
            ]
        ]
    },
    {
        "id": "302541cf.25825e",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 235,
        "y": 1180,
        "wires": [
            [
                "2292902.230547"
            ]
        ],
        "l": false
    },
    {
        "id": "12686c41.b5d294",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 550,
        "y": 920,
        "wires": [
            [
                "67e00588.f3434c"
            ]
        ]
    },
    {
        "id": "a979452.aaba5b8",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Convert + save as bmp",
        "info": "",
        "x": 1240,
        "y": 880,
        "wires": []
    },
    {
        "id": "53f02896.cbc9c8",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 510,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "f01bb953.0836a8",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "80",
        "data": "payload",
        "dataType": "msg",
        "x": 490,
        "y": 660,
        "wires": [
            [
                "9ae9f42f.69bbe8"
            ]
        ]
    },
    {
        "id": "744941af.d0ba",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 690,
        "y": 660,
        "wires": [
            [
                "c0ee6b75.918458"
            ]
        ]
    },
    {
        "id": "8c020811.1563a8",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 890,
        "y": 660,
        "wires": [
            []
        ]
    },
    {
        "id": "37b2a9a0.bb8596",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 930,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "28dbd127.ad7f1e",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "Worf",
        "width": "90",
        "data": "worf",
        "dataType": "msg",
        "x": 510,
        "y": 1340,
        "wires": [
            [
                "532fbc04.a18154"
            ]
        ]
    },
    {
        "id": "d69f7d94.1575a",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "picard",
        "width": "90",
        "data": "picard",
        "dataType": "msg",
        "x": 710,
        "y": 1340,
        "wires": [
            [
                "c2fe5bd2.f61df8"
            ]
        ]
    },
    {
        "id": "5ca17346.6ea04c",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "Capt' Worf",
        "width": "90",
        "data": "captainWorf",
        "dataType": "msg",
        "x": 950,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "ad96f84f.a3d028",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 1030,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "532b1144.e69ae",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "100",
        "data": "payload",
        "dataType": "msg",
        "x": 830,
        "y": 920,
        "wires": [
            [
                "cdc61580.7d3078",
                "6b4fa595.48c8ac",
                "fd21f8ce.584578",
                "dd35f049.3a4aa"
            ]
        ]
    },
    {
        "id": "50c0755d.ab05bc",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "",
        "data": "data:image/jpeg;base64,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",
        "dataType": "str",
        "ret": "img",
        "parameter1": "batch",
        "parameter1Type": "msg",
        "parameter2": "",
        "parameter2Type": "msg",
        "parameter3": "",
        "parameter3Type": "msg",
        "parameter4": "",
        "parameter4Type": "msg",
        "parameter5": "",
        "parameter5Type": "msg",
        "parameter6": "",
        "parameter6Type": "msg",
        "parameter7": "",
        "parameter7Type": "msg",
        "parameter8": "",
        "parameter8Type": "msg",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "batch",
        "selectedJimpFunction": {
            "name": "batch",
            "fn": "batch",
            "description": "apply one or more functions",
            "parameters": [
                {
                    "name": "options",
                    "type": "json",
                    "required": true,
                    "hint": "an object or an array of objects containing {\"name\" : \"function_name\", \"parameters\" : [x,y,z]}.  Refer to info on side panel}"
                }
            ]
        },
        "x": 690,
        "y": 1600,
        "wires": [
            [
                "f6c6fe2d.4f907"
            ]
        ]
    },
    {
        "id": "734e54e1.d713dc",
        "type": "function",
        "z": "3d014934.7e38a6",
        "name": "dynamic batch",
        "func": "\n\n//some common vars (these could be passed in from another node)\nvar position = msg.payload.position || {  x : 10, y: 10 }\nvar padding = msg.payload.padding || { x: 2, y: 2 };\nvar text = msg.payload.text;\n\nvar icon = msg.icon; //get icon loaded by previous node\n\n\n//create the batch operations\nmsg.batch = [];\n\nif(icon){\n    //op1 blt an icon onto image\n    var op1 = {\n        \"name\":\"blit\",\n        \"parameters\":[\n            icon,\n            position.x, //dst x\n            position.y, //dst y\n            0, //src x\n            0, //src y\n            20 , //src w\n            20   //src h\n        ]\n    }\n    position.x += icon.bitmap.width + padding.x;\n    msg.batch.push(op1);\n}\n\n//op2 print text next to icon\nvar op2 = {\n    \"name\": \"print\",\n    \"parameters\": [\n        \"FONT_SANS_16_BLACK\",\n        position.x, //x\n        position.y + padding.y + 2, //y\n        {\n            \"text\": text,\n            \"alignmentX\": \"Jimp.HORIZONTAL_ALIGN_LEFT\",\n            \"alignmentY\": \"Jimp.VERTICAL_ALIGN_TOP\"\n        },\n        -1,\n        -1\n    ]\n}\nmsg.batch.push(op2)\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 660,
        "y": 1540,
        "wires": [
            [
                "50c0755d.ab05bc",
                "fed62936.775338"
            ]
        ]
    },
    {
        "id": "932bf161.b8561",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "very well done",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"position\":{\"x\":20,\"y\":20},\"padding\":{\"x\":2,\"y\":2},\"text\":\"Very well done!\",\"icon\":\"thumbup\"}",
        "payloadType": "json",
        "x": 290,
        "y": 1580,
        "wires": [
            [
                "30822ca9.89f824"
            ]
        ]
    },
    {
        "id": "f6c6fe2d.4f907",
        "type": "image viewer",
        "z": "3d014934.7e38a6",
        "name": "",
        "width": "200",
        "data": "payload",
        "dataType": "msg",
        "x": 870,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "fed62936.775338",
        "type": "debug",
        "z": "3d014934.7e38a6",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 870,
        "y": 1540,
        "wires": []
    },
    {
        "id": "1594623b.f3cdbe",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "try harder",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"position\":{\"x\":15,\"y\":30},\"padding\":{\"x\":5,\"y\":-2},\"text\":\"Try harder\",\"icon\":\"thumbdown\"}",
        "payloadType": "json",
        "x": 280,
        "y": 1620,
        "wires": [
            [
                "41f600f5.0468b"
            ]
        ]
    },
    {
        "id": "6f883d0a.247f04",
        "type": "inject",
        "z": "3d014934.7e38a6",
        "name": "well done",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"position\":{\"x\":10,\"y\":10},\"padding\":{\"x\":5,\"y\":2},\"text\":\"Well done\",\"icon\":\"thumbup\"}",
        "payloadType": "json",
        "x": 280,
        "y": 1540,
        "wires": [
            [
                "b571ee3.8ba261"
            ]
        ]
    },
    {
        "id": "b571ee3.8ba261",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Thumb Up",
        "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAswAAALMBudOKBAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHwSURBVEiJrdU5aJVBEAfw34YY8SAeRJSAIYSAF6JVKsHCSmxsBBsbg4W1hbGzsRMLi2DlgSB4dDaCpDAp7FTUICgRQQVvFM2BYsbi22e+PPKS7yUZWIad3dn/zuz8Z0WEqgMrcQ1fMYwBpHl9mgQ4jcBE1oHB5QT4gD/YigMYyyA9jXxaVJSU0jZsxnBEvI2IIdzNy3sb+VUGwJGsH5RsT7Le3tCrYmq68Rnj6CzZLypSdHjRb4B2PM8Hnalbe41pbFwUAFbgfj78tlJJYle2j+NqHoPox8oFAZBwPR/yAmvq1gfMlGr9eIqOiChulFLao6jxntLzrMZufMK+iHhVfruUUi866p50E05hP25GxNHabZ41uMlL7GySKxty2n7mLFjX4PCzFmgD84C8xxe0tNRQ5pCpyLubkZRSPzpxLyKmmyFaVamx+iHNMbmqjGXdtuwAKaWEE3k6suwAWIVe/MYjaF1mgElFiX6LiGlmRxC4hDdLADiu4MGtmqEM8C4iTuLyEgCOZX2nbGzDD0UEj818h6O4kp3aK5BrLX4p8t86q9kp+tCkxs1rSlEV5xUfT9cc/8WFvHekvJZqZE0prceWupB34CAOKdhZlo/4rqicrmybQF9EjP7fVbG3JPThHIYUTbAW8V8FuW6gu973H8v7fIpdSNO/AAAAAElFTkSuQmCC",
        "dataType": "str",
        "ret": "img",
        "parameter1": "20",
        "parameter1Type": "num",
        "parameter2": "20",
        "parameter2Type": "num",
        "parameter3": "RESIZE_BILINEAR",
        "parameter3Type": "resizeMode",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "icon",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 450,
        "y": 1540,
        "wires": [
            [
                "734e54e1.d713dc"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "30822ca9.89f824",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Thumb Up",
        "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAswAAALMBudOKBAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHwSURBVEiJrdU5aJVBEAfw34YY8SAeRJSAIYSAF6JVKsHCSmxsBBsbg4W1hbGzsRMLi2DlgSB4dDaCpDAp7FTUICgRQQVvFM2BYsbi22e+PPKS7yUZWIad3dn/zuz8Z0WEqgMrcQ1fMYwBpHl9mgQ4jcBE1oHB5QT4gD/YigMYyyA9jXxaVJSU0jZsxnBEvI2IIdzNy3sb+VUGwJGsH5RsT7Le3tCrYmq68Rnj6CzZLypSdHjRb4B2PM8Hnalbe41pbFwUAFbgfj78tlJJYle2j+NqHoPox8oFAZBwPR/yAmvq1gfMlGr9eIqOiChulFLao6jxntLzrMZufMK+iHhVfruUUi866p50E05hP25GxNHabZ41uMlL7GySKxty2n7mLFjX4PCzFmgD84C8xxe0tNRQ5pCpyLubkZRSPzpxLyKmmyFaVamx+iHNMbmqjGXdtuwAKaWEE3k6suwAWIVe/MYjaF1mgElFiX6LiGlmRxC4hDdLADiu4MGtmqEM8C4iTuLyEgCOZX2nbGzDD0UEj818h6O4kp3aK5BrLX4p8t86q9kp+tCkxs1rSlEV5xUfT9cc/8WFvHekvJZqZE0prceWupB34CAOKdhZlo/4rqicrmybQF9EjP7fVbG3JPThHIYUTbAW8V8FuW6gu973H8v7fIpdSNO/AAAAAElFTkSuQmCC",
        "dataType": "str",
        "ret": "img",
        "parameter1": "20",
        "parameter1Type": "num",
        "parameter2": "20",
        "parameter2Type": "num",
        "parameter3": "RESIZE_BILINEAR",
        "parameter3Type": "resizeMode",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "icon",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 450,
        "y": 1580,
        "wires": [
            [
                "734e54e1.d713dc"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "41f600f5.0468b",
        "type": "jimp-image",
        "z": "3d014934.7e38a6",
        "name": "Thumb Down",
        "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAswAAALMBudOKBAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAH3SURBVEiJtdW/b45RFAfwz33TUpo0JZWIX5HqoiKRDhIJMVgwGdhY8B8Y1CA2FpOhBhGkg4g/QMKgYUfUr1AiBiJC/Ei1iF7Dc97m8aRv+75VJ7k5z3PO+Z4f955zr5yzZhYGcAo38QRfkfEbL3EVfVVcCrCUUjdW+ps2Yg/2YnVF9x6f0Y7ekE1ia855dNoqAhzHRGQ005rEXZzFAayrVLcW58J2pKKzCF9CeR/f4/sxLuEQuprYwi6M4wfaygG6w+GbEJyM/8Fmz6fkbCSwA3VZrbSna1JK53HY/Gk4+P6ysF5Bdc2ngoRPGKvL2v4h25loCTrRmVKq5ZynanMhWqQJjCkaZwAWNEAu9ulC/O5Y8ABBG4L//F8BHgTfVg+QGxh2pJRSq95zzhfxFrtTSrV6e42auVWfo7/FVl2mmOhvSPU2Pai4j3pLySzFZtxOKW3POb8oZ5pS6kNPpYAVOBbYa7mJoRmOSp6is6IfbFB1xkP05JzNVW47bgXoOsX1HrpNIR/H5VhDOILF03ZN3pKPwtmJiu4VprC8Ib7Jg1uPD5HtqpK8/gbsa4Rtag5yzq9xOg7vaEl1L3h/I2wrg3Yj+M6SbEvwZ7Nl18pV/A6/FE/kLsVjn9H7T2dQCnImHNaf1YyhWTEtBujAFXzEHcUspNkwfwDkT6FewL2+qwAAAABJRU5ErkJggg==",
        "dataType": "str",
        "ret": "img",
        "parameter1": "20",
        "parameter1Type": "num",
        "parameter2": "20",
        "parameter2Type": "num",
        "parameter3": "RESIZE_BILINEAR",
        "parameter3Type": "resizeMode",
        "parameter4": "",
        "parameter4Type": "",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "icon",
        "parameterCount": 3,
        "jimpFunction": "resize",
        "selectedJimpFunction": {
            "name": "resize",
            "fn": "resize",
            "description": "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).",
            "parameters": [
                {
                    "name": "w",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the width to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "h",
                    "type": "num|auto",
                    "required": true,
                    "hint": "the height to resize the image to (or \"Jimp.AUTO\" or -1)"
                },
                {
                    "name": "mode",
                    "type": "resizeMode",
                    "required": false,
                    "hint": "a scaling method (e.g. Jimp.RESIZE_BEZIER)"
                }
            ]
        },
        "x": 450,
        "y": 1620,
        "wires": [
            [
                "734e54e1.d713dc"
            ]
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "ef127b3c.ddcd18",
        "type": "comment",
        "z": "3d014934.7e38a6",
        "name": "Working with images, icons and text",
        "info": "",
        "x": 340,
        "y": 1500,
        "wires": []
    },
    {
        "id": "a8f63632.34c3d8",
        "type": "jimp-image",
        "z": "4c1c8ca0.447d94",
        "name": "written.jpg",
        "data": "payload",
        "dataType": "msg",
        "ret": "img",
        "parameter1": "fileName",
        "parameter1Type": "msg",
        "parameter2": "true",
        "parameter2Type": "bool",
        "parameter3": "0",
        "parameter3Type": "str",
        "parameter4": "RESIZE_NEAREST_NEIGHBOR",
        "parameter4Type": "Jimp",
        "parameter5": "",
        "parameter5Type": "",
        "parameter6": "",
        "parameter6Type": "",
        "parameter7": "",
        "parameter7Type": "",
        "parameter8": "",
        "parameter8Type": "",
        "sendProperty": "payload",
        "parameterCount": 1,
        "jimpFunction": "write",
        "selectedJimpFunction": {
            "name": "write",
            "fn": "write",
            "description": "Write to file. NOTE: You can specify an alternative file extension type to change the type. Currently support types are jpg, png, bmp.",
            "parameters": [
                {
                    "name": "filename",
                    "type": "str",
                    "required": true,
                    "hint": "Name of the file",
                    "defaultType": "str"
                }
            ]
        },
        "x": 1390,
        "y": 1340,
        "wires": [
            []
        ],
        "icon": "font-awesome/fa-image"
    },
    {
        "id": "e99e4b49.1f2588",
        "type": "link out",
        "z": "4c1c8ca0.447d94",
        "name": "new Setting",
        "links": [
            "a79732d9.cc209"
        ],
        "x": 975,
        "y": 100,
        "wires": []
    },
    {
        "id": "40735537.f4a55c",
        "type": "function",
        "z": "4c1c8ca0.447d94",
        "name": "Check for change in trigger mode",
        "func": "if ((flow.get('device').triggerMode.value == 0) && (msg.payload.triggerMode.value == 1))\n{\n    flow.set('imageFileCounter',0);\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 570,
        "y": 1460,
        "wires": [
            []
        ]
    },
    {
        "id": "a79732d9.cc209",
        "type": "link in",
        "z": "4c1c8ca0.447d94",
        "name": "Check for change in trigger mode",
        "links": [
            "e99e4b49.1f2588"
        ],
        "x": 375,
        "y": 1460,
        "wires": [
            [
                "40735537.f4a55c"
            ]
        ]
    },
    {
        "id": "18a5f742.0972b9",
        "type": "delay",
        "z": "4c1c8ca0.447d94",
        "name": "",
        "pauseType": "delay",
        "timeout": "100",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 1050,
        "y": 140,
        "wires": [
            [
                "d2572e9a.d2ef9"
            ]
        ]
    }
]